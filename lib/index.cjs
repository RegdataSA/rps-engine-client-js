(function(B,V){typeof exports=="object"&&typeof module<"u"?V(exports,require("uuid")):typeof define=="function"&&define.amd?define(["exports","uuid"],V):(B=typeof globalThis<"u"?globalThis:B||self,V(B.index={},B.uuid))})(this,function(B,V){var Qr,br,et,Sr,rt,Fr,or,Tr,mr,Cr,sr,tt,ci,nt,di,it,pi,at,mi,ot,vi,st,yi,ut,gi,Rr,sn,ft,wi,Ir,un,lt,xi,Or,fn,ht,Ei,ct,Ai,dt,bi,pt,Si;"use strict";var on=(B,V,oe)=>{if(!V.has(B))throw TypeError("Cannot "+oe)};var fe=(B,V,oe)=>(on(B,V,"read from private field"),oe?oe.call(B):V.get(B)),L=(B,V,oe)=>{if(V.has(B))throw TypeError("Cannot add the same private member more than once");V instanceof WeakSet?V.add(B):V.set(B,oe)},Ve=(B,V,oe,Lr)=>(on(B,V,"write to private field"),Lr?Lr.call(B,oe):V.set(B,oe),oe);var K=(B,V,oe)=>(on(B,V,"access private method"),oe);var oe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Lr(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var fr={},Fi={get exports(){return fr},set exports(i){fr=i}},_r={},Ti={get exports(){return _r},set exports(i){_r=i}};/*! https://mths.be/punycode v1.4.1 by @mathias */(function(i,e){(function(r){var a=e&&!e.nodeType&&e,o=i&&!i.nodeType&&i,u=typeof oe=="object"&&oe;(u.global===u||u.window===u||u.self===u)&&(r=u);var l,s=2147483647,m=36,p=1,y=26,g=38,A=700,O=72,_=128,N="-",Ue=/^xn--/,ye=/[^\x20-\x7E]/,Te=/[\x2E\u3002\uFF0E\uFF61]/g,Xe={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=m-p,M=Math.floor,ge=String.fromCharCode,we;function he(F){throw new RangeError(Xe[F])}function Me(F,S){for(var C=F.length,j=[];C--;)j[C]=S(F[C]);return j}function ne(F,S){var C=F.split("@"),j="";C.length>1&&(j=C[0]+"@",F=C[1]),F=F.replace(Te,".");var D=F.split("."),J=Me(D,S).join(".");return j+J}function xe(F){for(var S=[],C=0,j=F.length,D,J;C<j;)D=F.charCodeAt(C++),D>=55296&&D<=56319&&C<j?(J=F.charCodeAt(C++),(J&64512)==56320?S.push(((D&1023)<<10)+(J&1023)+65536):(S.push(D),C--)):S.push(D);return S}function se(F){return Me(F,function(S){var C="";return S>65535&&(S-=65536,C+=ge(S>>>10&1023|55296),S=56320|S&1023),C+=ge(S),C}).join("")}function Ce(F){return F-48<10?F-22:F-65<26?F-65:F-97<26?F-97:m}function Ee(F,S){return F+22+75*(F<26)-((S!=0)<<5)}function Pe(F,S,C){var j=0;for(F=C?M(F/A):F>>1,F+=M(F/S);F>R*y>>1;j+=m)F=M(F/R);return M(j+(R+1)*F/(F+g))}function vr(F){var S=[],C=F.length,j,D=0,J=_,Z=O,k,ie,ce,Ae,X,Y,z,de,$e;for(k=F.lastIndexOf(N),k<0&&(k=0),ie=0;ie<k;++ie)F.charCodeAt(ie)>=128&&he("not-basic"),S.push(F.charCodeAt(ie));for(ce=k>0?k+1:0;ce<C;){for(Ae=D,X=1,Y=m;ce>=C&&he("invalid-input"),z=Ce(F.charCodeAt(ce++)),(z>=m||z>M((s-D)/X))&&he("overflow"),D+=z*X,de=Y<=Z?p:Y>=Z+y?y:Y-Z,!(z<de);Y+=m)$e=m-de,X>M(s/$e)&&he("overflow"),X*=$e;j=S.length+1,Z=Pe(D-Ae,j,Ae==0),M(D/j)>s-J&&he("overflow"),J+=M(D/j),D%=j,S.splice(D++,0,J)}return se(S)}function yr(F){var S,C,j,D,J,Z,k,ie,ce,Ae,X,Y=[],z,de,$e,f;for(F=xe(F),z=F.length,S=_,C=0,J=O,Z=0;Z<z;++Z)X=F[Z],X<128&&Y.push(ge(X));for(j=D=Y.length,D&&Y.push(N);j<z;){for(k=s,Z=0;Z<z;++Z)X=F[Z],X>=S&&X<k&&(k=X);for(de=j+1,k-S>M((s-C)/de)&&he("overflow"),C+=(k-S)*de,S=k,Z=0;Z<z;++Z)if(X=F[Z],X<S&&++C>s&&he("overflow"),X==S){for(ie=C,ce=m;Ae=ce<=J?p:ce>=J+y?y:ce-J,!(ie<Ae);ce+=m)f=ie-Ae,$e=m-Ae,Y.push(ge(Ee(Ae+f%$e,0))),ie=M(f/$e);Y.push(ge(Ee(ie,0))),J=Pe(C,de,j==D),C=0,++j}++C,++S}return Y.join("")}function Ur(F){return ne(F,function(S){return Ue.test(S)?vr(S.slice(4).toLowerCase()):S})}function Pr(F){return ne(F,function(S){return ye.test(S)?"xn--"+yr(S):S})}if(l={version:"1.4.1",ucs2:{decode:xe,encode:se},decode:vr,encode:yr,toASCII:Pr,toUnicode:Ur},a&&o)if(i.exports==a)o.exports=l;else for(we in l)l.hasOwnProperty(we)&&(a[we]=l[we]);else r.punycode=l})(oe)})(Ti,_r);var Nr={},Ci={get exports(){return Nr},set exports(i){Nr=i}},wr={};function Ri(i,e){return Object.prototype.hasOwnProperty.call(i,e)}var Ii=function(i,e,r,a){e=e||"&",r=r||"=";var o={};if(typeof i!="string"||i.length===0)return o;var u=/\+/g;i=i.split(e);var l=1e3;a&&typeof a.maxKeys=="number"&&(l=a.maxKeys);var s=i.length;l>0&&s>l&&(s=l);for(var m=0;m<s;++m){var p=i[m].replace(u,"%20"),y=p.indexOf(r),g,A,O,_;y>=0?(g=p.substr(0,y),A=p.substr(y+1)):(g=p,A=""),O=decodeURIComponent(g),_=decodeURIComponent(A),Ri(o,O)?Oi(o[O])?o[O].push(_):o[O]=[o[O],_]:o[O]=_}return o},Oi=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"},xr=function(i){switch(typeof i){case"string":return i;case"boolean":return i?"true":"false";case"number":return isFinite(i)?i:"";default:return""}},Ui=function(i,e,r,a){return e=e||"&",r=r||"=",i===null&&(i=void 0),typeof i=="object"?ln($i(i),function(o){var u=encodeURIComponent(xr(o))+r;return Pi(i[o])?ln(i[o],function(l){return u+encodeURIComponent(xr(l))}).join(e):u+encodeURIComponent(xr(i[o]))}).join(e):a?encodeURIComponent(xr(a))+r+encodeURIComponent(xr(i)):""},Pi=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function ln(i,e){if(i.map)return i.map(e);for(var r=[],a=0;a<i.length;a++)r.push(e(i[a],a));return r}var $i=Object.keys||function(i){var e=[];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.push(r);return e};wr.decode=wr.parse=Ii,wr.encode=wr.stringify=Ui,function(i,e){Object.defineProperty(e,"__esModule",{value:!0});var r=wr;function a(l){return encodeURIComponent(l)}function o(l){return decodeURIComponent(l)}var u={decode:r.decode,encode:r.encode,parse:r.parse,stringify:r.stringify,escape:a,unescape:o};Object.defineProperty(e,"decode",{enumerable:!0,get:function(){return r.decode}}),Object.defineProperty(e,"encode",{enumerable:!0,get:function(){return r.encode}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return r.parse}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),e.default=u,e.escape=a,e.unescape=o,e=i.exports=u}(Ci,Nr),function(i,e){Object.defineProperty(e,"__esModule",{value:!0});var r=_r,a=Nr;function o(c){return c&&typeof c=="object"&&"default"in c?c:{default:c}}var u=o(r),l=o(a),s={isString:function(c){return typeof c=="string"},isObject:function(c){return typeof c=="object"&&c!==null},isNull:function(c){return c===null},isNullOrUndefined:function(c){return c==null}},m=u.default,p=s,y=Pe,g=yr,A=Ur,O=vr,_=N;function N(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Ue=/^([a-z0-9.+-]+:)/i,ye=/:[0-9]*$/,Te=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Xe=["<",">",'"',"`"," ","\r",`
`,"	"],R=["{","}","|","\\","^","`"].concat(Xe),M=["'"].concat(R),ge=["%","/","?",";","#"].concat(M),we=["/","?","#"],he=255,Me=/^[+a-z0-9A-Z_-]{0,63}$/,ne=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,xe={javascript:!0,"javascript:":!0},se={javascript:!0,"javascript:":!0},Ce={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Ee=l.default;function Pe(c,x,d){if(c&&p.isObject(c)&&c instanceof N)return c;var b=new N;return b.parse(c,x,d),b}N.prototype.parse=function(c,x,d){if(!p.isString(c))throw new TypeError("Parameter 'url' must be a string, not "+typeof c);var b=c.indexOf("?"),q=b!==-1&&b<c.indexOf("#")?"?":"#",ue=c.split(q),ae=/\\/g;ue[0]=ue[0].replace(ae,"/"),c=ue.join(q);var T=c;if(T=T.trim(),!d&&c.split("#").length===1){var ke=Te.exec(T);if(ke)return this.path=T,this.href=T,this.pathname=ke[1],ke[2]?(this.search=ke[2],x?this.query=Ee.parse(this.search.substr(1)):this.query=this.search.substr(1)):x&&(this.search="",this.query={}),this}var G=Ue.exec(T);if(G){G=G[0];var ur=G.toLowerCase();this.protocol=ur,T=T.substr(G.length)}if(d||G||T.match(/^\/\/[^@\/]+@[^@\/]+/)){var $r=T.substr(0,2)==="//";$r&&!(G&&se[G])&&(T=T.substr(2),this.slashes=!0)}if(!se[G]&&($r||G&&!Ce[G])){for(var le=-1,Q=0;Q<we.length;Q++){var Ge=T.indexOf(we[Q]);Ge!==-1&&(le===-1||Ge<le)&&(le=Ge)}var qr,pe;le===-1?pe=T.lastIndexOf("@"):pe=T.lastIndexOf("@",le),pe!==-1&&(qr=T.slice(0,pe),T=T.slice(pe+1),this.auth=decodeURIComponent(qr)),le=-1;for(var Q=0;Q<ge.length;Q++){var Ge=T.indexOf(ge[Q]);Ge!==-1&&(le===-1||Ge<le)&&(le=Ge)}le===-1&&(le=T.length),this.host=T.slice(0,le),T=T.slice(le),this.parseHost(),this.hostname=this.hostname||"";var Br=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!Br)for(var I=this.hostname.split(/\./),Q=0,ee=I.length;Q<ee;Q++){var ze=I[Q];if(ze&&!ze.match(Me)){for(var qe="",Be=0,rn=ze.length;Be<rn;Be++)ze.charCodeAt(Be)>127?qe+="x":qe+=ze[Be];if(!qe.match(Me)){var Qe=I.slice(0,Q),Ze=I.slice(Q+1),gr=ze.match(ne);gr&&(Qe.push(gr[1]),Ze.unshift(gr[2])),Ze.length&&(T="/"+Ze.join(".")+T),this.hostname=Qe.join(".");break}}}this.hostname.length>he?this.hostname="":this.hostname=this.hostname.toLowerCase(),Br||(this.hostname=m.toASCII(this.hostname));var tn=this.port?":"+this.port:"",lo=this.hostname||"";this.host=lo+tn,this.href+=this.host,Br&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),T[0]!=="/"&&(T="/"+T))}if(!xe[ur])for(var Q=0,ee=M.length;Q<ee;Q++){var jr=M[Q];if(T.indexOf(jr)!==-1){var nn=encodeURIComponent(jr);nn===jr&&(nn=escape(jr)),T=T.split(jr).join(nn)}}var an=T.indexOf("#");an!==-1&&(this.hash=T.substr(an),T=T.slice(0,an));var mt=T.indexOf("?");if(mt!==-1?(this.search=T.substr(mt),this.query=T.substr(mt+1),x&&(this.query=Ee.parse(this.query)),T=T.slice(0,mt)):x&&(this.search="",this.query={}),T&&(this.pathname=T),Ce[ur]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var tn=this.pathname||"",ho=this.search||"";this.path=tn+ho}return this.href=this.format(),this};function vr(c){return p.isString(c)&&(c=Pe(c)),c instanceof N?c.format():N.prototype.format.call(c)}N.prototype.format=function(){var c=this.auth||"";c&&(c=encodeURIComponent(c),c=c.replace(/%3A/i,":"),c+="@");var x=this.protocol||"",d=this.pathname||"",b=this.hash||"",q=!1,ue="";this.host?q=c+this.host:this.hostname&&(q=c+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(q+=":"+this.port)),this.query&&p.isObject(this.query)&&Object.keys(this.query).length&&(ue=Ee.stringify(this.query));var ae=this.search||ue&&"?"+ue||"";return x&&x.substr(-1)!==":"&&(x+=":"),this.slashes||(!x||Ce[x])&&q!==!1?(q="//"+(q||""),d&&d.charAt(0)!=="/"&&(d="/"+d)):q||(q=""),b&&b.charAt(0)!=="#"&&(b="#"+b),ae&&ae.charAt(0)!=="?"&&(ae="?"+ae),d=d.replace(/[?#]/g,function(T){return encodeURIComponent(T)}),ae=ae.replace("#","%23"),x+q+d+ae+b};function yr(c,x){return Pe(c,!1,!0).resolve(x)}N.prototype.resolve=function(c){return this.resolveObject(Pe(c,!1,!0)).format()};function Ur(c,x){return c?Pe(c,!1,!0).resolveObject(x):x}N.prototype.resolveObject=function(c){if(p.isString(c)){var x=new N;x.parse(c,!1,!0),c=x}for(var d=new N,b=Object.keys(this),q=0;q<b.length;q++){var ue=b[q];d[ue]=this[ue]}if(d.hash=c.hash,c.href==="")return d.href=d.format(),d;if(c.slashes&&!c.protocol){for(var ae=Object.keys(c),T=0;T<ae.length;T++){var ke=ae[T];ke!=="protocol"&&(d[ke]=c[ke])}return Ce[d.protocol]&&d.hostname&&!d.pathname&&(d.path=d.pathname="/"),d.href=d.format(),d}if(c.protocol&&c.protocol!==d.protocol){if(!Ce[c.protocol]){for(var G=Object.keys(c),ur=0;ur<G.length;ur++){var $r=G[ur];d[$r]=c[$r]}return d.href=d.format(),d}if(d.protocol=c.protocol,!c.host&&!se[c.protocol]){for(var ee=(c.pathname||"").split("/");ee.length&&!(c.host=ee.shift()););c.host||(c.host=""),c.hostname||(c.hostname=""),ee[0]!==""&&ee.unshift(""),ee.length<2&&ee.unshift(""),d.pathname=ee.join("/")}else d.pathname=c.pathname;if(d.search=c.search,d.query=c.query,d.host=c.host||"",d.auth=c.auth,d.hostname=c.hostname||c.host,d.port=c.port,d.pathname||d.search){var le=d.pathname||"",Q=d.search||"";d.path=le+Q}return d.slashes=d.slashes||c.slashes,d.href=d.format(),d}var Ge=d.pathname&&d.pathname.charAt(0)==="/",qr=c.host||c.pathname&&c.pathname.charAt(0)==="/",pe=qr||Ge||d.host&&c.pathname,Br=pe,I=d.pathname&&d.pathname.split("/")||[],ee=c.pathname&&c.pathname.split("/")||[],ze=d.protocol&&!Ce[d.protocol];if(ze&&(d.hostname="",d.port=null,d.host&&(I[0]===""?I[0]=d.host:I.unshift(d.host)),d.host="",c.protocol&&(c.hostname=null,c.port=null,c.host&&(ee[0]===""?ee[0]=c.host:ee.unshift(c.host)),c.host=null),pe=pe&&(ee[0]===""||I[0]==="")),qr)d.host=c.host||c.host===""?c.host:d.host,d.hostname=c.hostname||c.hostname===""?c.hostname:d.hostname,d.search=c.search,d.query=c.query,I=ee;else if(ee.length)I||(I=[]),I.pop(),I=I.concat(ee),d.search=c.search,d.query=c.query;else if(!p.isNullOrUndefined(c.search)){if(ze){d.hostname=d.host=I.shift();var qe=d.host&&d.host.indexOf("@")>0?d.host.split("@"):!1;qe&&(d.auth=qe.shift(),d.host=d.hostname=qe.shift())}return d.search=c.search,d.query=c.query,(!p.isNull(d.pathname)||!p.isNull(d.search))&&(d.path=(d.pathname?d.pathname:"")+(d.search?d.search:"")),d.href=d.format(),d}if(!I.length)return d.pathname=null,d.search?d.path="/"+d.search:d.path=null,d.href=d.format(),d;for(var Be=I.slice(-1)[0],rn=(d.host||c.host||I.length>1)&&(Be==="."||Be==="..")||Be==="",Qe=0,Ze=I.length;Ze>=0;Ze--)Be=I[Ze],Be==="."?I.splice(Ze,1):Be===".."?(I.splice(Ze,1),Qe++):Qe&&(I.splice(Ze,1),Qe--);if(!pe&&!Br)for(;Qe--;Qe)I.unshift("..");pe&&I[0]!==""&&(!I[0]||I[0].charAt(0)!=="/")&&I.unshift(""),rn&&I.join("/").substr(-1)!=="/"&&I.push("");var gr=I[0]===""||I[0]&&I[0].charAt(0)==="/";if(ze){d.hostname=d.host=gr?"":I.length?I.shift():"";var qe=d.host&&d.host.indexOf("@")>0?d.host.split("@"):!1;qe&&(d.auth=qe.shift(),d.host=d.hostname=qe.shift())}return pe=pe||d.host&&I.length,pe&&!gr&&I.unshift(""),I.length?d.pathname=I.join("/"):(d.pathname=null,d.path=null),(!p.isNull(d.pathname)||!p.isNull(d.search))&&(d.path=(d.pathname?d.pathname:"")+(d.search?d.search:"")),d.auth=c.auth||d.auth,d.slashes=d.slashes||c.slashes,d.href=d.format(),d},N.prototype.parseHost=function(){var c=this.host,x=ye.exec(c);x&&(x=x[0],x!==":"&&(this.port=x.substr(1)),c=c.substr(0,c.length-x.length)),c&&(this.hostname=c)};function Pr(c,x){for(var d=0,b=c.length-1;b>=0;b--){var q=c[b];q==="."?c.splice(b,1):q===".."?(c.splice(b,1),d++):d&&(c.splice(b,1),d--)}if(x)for(;d--;d)c.unshift("..");return c}function F(){for(var c="",x=!1,d=arguments.length-1;d>=-1&&!x;d--){var b=d>=0?arguments[d]:"/";if(typeof b!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!b)continue;c=b+"/"+c,x=b.charAt(0)==="/"}return c=Pr(S(c.split("/"),function(q){return!!q}),!x).join("/"),(x?"/":"")+c||"."}function S(c,x){if(c.filter)return c.filter(x);for(var d=[],b=0;b<c.length;b++)x(c[b],b,c)&&d.push(c[b]);return d}var C=function(c){function x(){var b=this||self;return delete c.prototype.__magic__,b}if(typeof globalThis=="object")return globalThis;if(this)return x();c.defineProperty(c.prototype,"__magic__",{configurable:!0,get:x});var d=__magic__;return d}(Object),j=O,D=y,J=g,Z=_,k=C.URL,ie=C.URLSearchParams,ce=/%/g,Ae=/\\/g,X=/\n/g,Y=/\r/g,z=/\t/g,de=47;function $e(c){var x=c??null;return Boolean(x!==null&&(x==null?void 0:x.href)&&(x==null?void 0:x.origin))}function f(c){if(c.hostname!=="")throw new TypeError('File URL host must be "localhost" or empty on browser');for(var x=c.pathname,d=0;d<x.length;d++)if(x[d]==="%"){var b=x.codePointAt(d+2)|32;if(x[d+1]==="2"&&b===102)throw new TypeError("File URL path must not include encoded / characters")}return decodeURIComponent(x)}function t(c){return c.includes("%")&&(c=c.replace(ce,"%25")),c.includes("\\")&&(c=c.replace(Ae,"%5C")),c.includes(`
`)&&(c=c.replace(X,"%0A")),c.includes("\r")&&(c=c.replace(Y,"%0D")),c.includes("	")&&(c=c.replace(z,"%09")),c}var n=function(x){if(typeof x>"u")throw new TypeError('The "domain" argument must be specified');return new k("http://"+x).hostname},h=function(x){if(typeof x>"u")throw new TypeError('The "domain" argument must be specified');return new k("http://"+x).hostname},v=function(x){var d=new k("file://"),b=F(x),q=x.charCodeAt(x.length-1);return q===de&&b[b.length-1]!=="/"&&(b+="/"),d.pathname=t(b),d},w=function(x){if(!$e(x)&&typeof x!="string")throw new TypeError('The "path" argument must be of type string or an instance of URL. Received type '+typeof x+" ("+x+")");var d=new k(x);if(d.protocol!=="file:")throw new TypeError("The URL must be of scheme file");return f(d)},E=function(x,d){var b,q,ue;if(d===void 0&&(d={}),!(x instanceof k))return j(x);if(typeof d!="object"||d===null)throw new TypeError('The "options" argument must be of type object.');var ae=(b=d.auth)!=null?b:!0,T=(q=d.fragment)!=null?q:!0,ke=(ue=d.search)!=null?ue:!0,G=new k(x.toString());return ae||(G.username="",G.password=""),T||(G.hash=""),ke||(G.search=""),G.toString()},U={format:E,parse:D,resolve:J,resolveObject:A,Url:Z,URL:k,URLSearchParams:ie,domainToASCII:n,domainToUnicode:h,pathToFileURL:v,fileURLToPath:w};e.URL=k,e.URLSearchParams=ie,e.Url=Z,e.default=U,e.domainToASCII=n,e.domainToUnicode=h,e.fileURLToPath=w,e.format=E,e.parse=D,e.pathToFileURL=v,e.resolve=J,e.resolveObject=A,e=i.exports=U}(Fi,fr);var W={},hn=fr,vt=W.ValidationError=function(e,r,a,o,u,l){if(Array.isArray(o)?(this.path=o,this.property=o.reduce(function(m,p){return m+dn(p)},"instance")):o!==void 0&&(this.property=o),e&&(this.message=e),a){var s=a.$id||a.id;this.schema=s||a}r!==void 0&&(this.instance=r),this.name=u,this.argument=l,this.stack=this.toString()};vt.prototype.toString=function(){return this.property+" "+this.message};var Dr=W.ValidatorResult=function(e,r,a,o){this.instance=e,this.schema=r,this.options=a,this.path=o.path,this.propertyPath=o.propertyPath,this.errors=[],this.throwError=a&&a.throwError,this.throwFirst=a&&a.throwFirst,this.throwAll=a&&a.throwAll,this.disableFormat=a&&a.disableFormat===!0};Dr.prototype.addError=function(e){var r;if(typeof e=="string")r=new vt(e,this.instance,this.schema,this.path);else{if(!e)throw new Error("Missing error detail");if(!e.message)throw new Error("Missing error message");if(!e.name)throw new Error("Missing validator type");r=new vt(e.message,this.instance,this.schema,this.path,e.name,e.argument)}if(this.errors.push(r),this.throwFirst)throw new er(this);if(this.throwError)throw r;return r},Dr.prototype.importErrors=function(e){typeof e=="string"||e&&e.validatorType?this.addError(e):e&&e.errors&&Array.prototype.push.apply(this.errors,e.errors)};function qi(i,e){return e+": "+i.toString()+`
`}Dr.prototype.toString=function(e){return this.errors.map(qi).join("")},Object.defineProperty(Dr.prototype,"valid",{get:function(){return!this.errors.length}}),W.ValidatorResultError=er;function er(i){Error.captureStackTrace&&Error.captureStackTrace(this,er),this.instance=i.instance,this.schema=i.schema,this.options=i.options,this.errors=i.errors}er.prototype=new Error,er.prototype.constructor=er,er.prototype.name="Validation Error";var cn=W.SchemaError=function i(e,r){this.message=e,this.schema=r,Error.call(this,e),Error.captureStackTrace(this,i)};cn.prototype=Object.create(Error.prototype,{constructor:{value:cn,enumerable:!1},name:{value:"SchemaError",enumerable:!1}});var yt=W.SchemaContext=function(e,r,a,o,u){this.schema=e,this.options=r,Array.isArray(a)?(this.path=a,this.propertyPath=a.reduce(function(l,s){return l+dn(s)},"instance")):this.propertyPath=a,this.base=o,this.schemas=u};yt.prototype.resolve=function(e){return hn.resolve(this.base,e)},yt.prototype.makeChild=function(e,r){var a=r===void 0?this.path:this.path.concat([r]),o=e.$id||e.id,u=hn.resolve(this.base,o||""),l=new yt(e,this.options,a,u,Object.create(this.schemas));return o&&!l.schemas[u]&&(l.schemas[u]=e),l};var Re=W.FORMAT_REGEXPS={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,email:/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/,"uri-reference":/^(((([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(([A-Za-z][+\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~]|[A-Za-z][+\-.0-9A-Za-z]*[!$&-*,;=@_~])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?|([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+(:\d*)?|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?:\d*|\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)?|[A-Za-z][+\-.0-9A-Za-z]*:?)?$/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/,"utc-millisec":function(i){return typeof i=="string"&&parseFloat(i)===parseInt(i,10)&&!isNaN(i)},regex:function(i){var e=!0;try{new RegExp(i)}catch{e=!1}return e},style:/\s*(.+?):\s*([^;]+);?/,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/};Re.regexp=Re.regex,Re.pattern=Re.regex,Re.ipv4=Re["ip-address"],W.isFormat=function(e,r,a){if(typeof e=="string"&&Re[r]!==void 0){if(Re[r]instanceof RegExp)return Re[r].test(e);if(typeof Re[r]=="function")return Re[r](e)}else if(a&&a.customFormats&&typeof a.customFormats[r]=="function")return a.customFormats[r](e);return!0};var dn=W.makeSuffix=function(e){return e=e.toString(),!e.match(/[.\s\[\]]/)&&!e.match(/^[\d]/)?"."+e:e.match(/^\d+$/)?"["+e+"]":"["+JSON.stringify(e)+"]"};W.deepCompareStrict=function i(e,r){if(typeof e!=typeof r)return!1;if(Array.isArray(e))return!Array.isArray(r)||e.length!==r.length?!1:e.every(function(u,l){return i(e[l],r[l])});if(typeof e=="object"){if(!e||!r)return e===r;var a=Object.keys(e),o=Object.keys(r);return a.length!==o.length?!1:a.every(function(u){return i(e[u],r[u])})}return e===r};function Bi(i,e,r,a){typeof r=="object"?e[a]=gt(i[a],r):i.indexOf(r)===-1&&e.push(r)}function ji(i,e,r){e[r]=i[r]}function Li(i,e,r,a){typeof e[a]!="object"||!e[a]?r[a]=e[a]:i[a]?r[a]=gt(i[a],e[a]):r[a]=e[a]}function gt(i,e){var r=Array.isArray(e),a=r&&[]||{};return r?(i=i||[],a=a.concat(i),e.forEach(Bi.bind(null,i,a))):(i&&typeof i=="object"&&Object.keys(i).forEach(ji.bind(null,i,a)),Object.keys(e).forEach(Li.bind(null,i,e,a))),a}W.deepMerge=gt,W.objectGetPath=function(e,r){for(var a=r.split("/").slice(1),o;typeof(o=a.shift())=="string";){var u=decodeURIComponent(o.replace(/~0/,"~").replace(/~1/g,"/"));if(!(u in e))return;e=e[u]}return e};function _i(i){return"/"+encodeURIComponent(i).replace(/~/g,"%7E")}W.encodePath=function(e){return e.map(_i).join("")},W.getDecimalPlaces=function(e){var r=0;if(isNaN(e))return r;typeof e!="number"&&(e=Number(e));var a=e.toString().split("e");if(a.length===2){if(a[1][0]!=="-")return r;r=Number(a[1].slice(1))}var o=a[0].split(".");return o.length===2&&(r+=o[1].length),r},W.isSchema=function(e){return typeof e=="object"&&e||typeof e=="boolean"};var be=W,P=be.ValidatorResult,Ke=be.SchemaError,wt={};wt.ignoreProperties={id:!0,default:!0,description:!0,title:!0,additionalItems:!0,then:!0,else:!0,$schema:!0,$ref:!0,extends:!0};var $=wt.validators={};$.type=function(e,r,a,o){if(e===void 0)return null;var u=new P(e,r,a,o),l=Array.isArray(r.type)?r.type:[r.type];if(!l.some(this.testType.bind(this,e,r,a,o))){var s=l.map(function(m){if(m){var p=m.$id||m.id;return p?"<"+p+">":m+""}});u.addError({name:"type",argument:s,message:"is not of a type(s) "+s})}return u};function xt(i,e,r,a,o){var u=e.throwError,l=e.throwAll;e.throwError=!1,e.throwAll=!1;var s=this.validateSchema(i,o,e,r);return e.throwError=u,e.throwAll=l,!s.valid&&a instanceof Function&&a(s),s.valid}$.anyOf=function(e,r,a,o){if(e===void 0)return null;var u=new P(e,r,a,o),l=new P(e,r,a,o);if(!Array.isArray(r.anyOf))throw new Ke("anyOf must be an array");if(!r.anyOf.some(xt.bind(this,e,a,o,function(m){l.importErrors(m)}))){var s=r.anyOf.map(function(m,p){var y=m.$id||m.id;return y?"<"+y+">":m.title&&JSON.stringify(m.title)||m.$ref&&"<"+m.$ref+">"||"[subschema "+p+"]"});a.nestedErrors&&u.importErrors(l),u.addError({name:"anyOf",argument:s,message:"is not any of "+s.join(",")})}return u},$.allOf=function(e,r,a,o){if(e===void 0)return null;if(!Array.isArray(r.allOf))throw new Ke("allOf must be an array");var u=new P(e,r,a,o),l=this;return r.allOf.forEach(function(s,m){var p=l.validateSchema(e,s,a,o);if(!p.valid){var y=s.$id||s.id,g=y||s.title&&JSON.stringify(s.title)||s.$ref&&"<"+s.$ref+">"||"[subschema "+m+"]";u.addError({name:"allOf",argument:{id:g,length:p.errors.length,valid:p},message:"does not match allOf schema "+g+" with "+p.errors.length+" error[s]:"}),u.importErrors(p)}}),u},$.oneOf=function(e,r,a,o){if(e===void 0)return null;if(!Array.isArray(r.oneOf))throw new Ke("oneOf must be an array");var u=new P(e,r,a,o),l=new P(e,r,a,o),s=r.oneOf.filter(xt.bind(this,e,a,o,function(p){l.importErrors(p)})).length,m=r.oneOf.map(function(p,y){var g=p.$id||p.id;return g||p.title&&JSON.stringify(p.title)||p.$ref&&"<"+p.$ref+">"||"[subschema "+y+"]"});return s!==1&&(a.nestedErrors&&u.importErrors(l),u.addError({name:"oneOf",argument:m,message:"is not exactly one from "+m.join(",")})),u},$.if=function(e,r,a,o){if(e===void 0)return null;if(!be.isSchema(r.if))throw new Error('Expected "if" keyword to be a schema');var u=xt.call(this,e,a,o,null,r.if),l=new P(e,r,a,o),s;if(u){if(r.then===void 0)return;if(!be.isSchema(r.then))throw new Error('Expected "then" keyword to be a schema');s=this.validateSchema(e,r.then,a,o.makeChild(r.then)),l.importErrors(s)}else{if(r.else===void 0)return;if(!be.isSchema(r.else))throw new Error('Expected "else" keyword to be a schema');s=this.validateSchema(e,r.else,a,o.makeChild(r.else)),l.importErrors(s)}return l};function Et(i,e){if(Object.hasOwnProperty.call(i,e))return i[e];if(e in i){for(;i=Object.getPrototypeOf(i);)if(Object.propertyIsEnumerable.call(i,e))return i[e]}}$.propertyNames=function(e,r,a,o){if(this.types.object(e)){var u=new P(e,r,a,o),l=r.propertyNames!==void 0?r.propertyNames:{};if(!be.isSchema(l))throw new Ke('Expected "propertyNames" to be a schema (object or boolean)');for(var s in e)if(Et(e,s)!==void 0){var m=this.validateSchema(s,l,a,o.makeChild(l));u.importErrors(m)}return u}},$.properties=function(e,r,a,o){if(this.types.object(e)){var u=new P(e,r,a,o),l=r.properties||{};for(var s in l){var m=l[s];if(m!==void 0){if(m===null)throw new Ke('Unexpected null, expected schema in "properties"');typeof a.preValidateProperty=="function"&&a.preValidateProperty(e,s,m,a,o);var p=Et(e,s),y=this.validateSchema(p,m,a,o.makeChild(m,s));y.instance!==u.instance[s]&&(u.instance[s]=y.instance),u.importErrors(y)}}return u}};function pn(i,e,r,a,o,u){if(this.types.object(i)&&!(e.properties&&e.properties[o]!==void 0))if(e.additionalProperties===!1)u.addError({name:"additionalProperties",argument:o,message:"is not allowed to have the additional property "+JSON.stringify(o)});else{var l=e.additionalProperties||{};typeof r.preValidateProperty=="function"&&r.preValidateProperty(i,o,l,r,a);var s=this.validateSchema(i[o],l,r,a.makeChild(l,o));s.instance!==u.instance[o]&&(u.instance[o]=s.instance),u.importErrors(s)}}$.patternProperties=function(e,r,a,o){if(this.types.object(e)){var u=new P(e,r,a,o),l=r.patternProperties||{};for(var s in e){var m=!0;for(var p in l){var y=l[p];if(y!==void 0){if(y===null)throw new Ke('Unexpected null, expected schema in "patternProperties"');try{var g=new RegExp(p,"u")}catch{g=new RegExp(p)}if(g.test(s)){m=!1,typeof a.preValidateProperty=="function"&&a.preValidateProperty(e,s,y,a,o);var A=this.validateSchema(e[s],y,a,o.makeChild(y,s));A.instance!==u.instance[s]&&(u.instance[s]=A.instance),u.importErrors(A)}}}m&&pn.call(this,e,r,a,o,s,u)}return u}},$.additionalProperties=function(e,r,a,o){if(this.types.object(e)){if(r.patternProperties)return null;var u=new P(e,r,a,o);for(var l in e)pn.call(this,e,r,a,o,l,u);return u}},$.minProperties=function(e,r,a,o){if(this.types.object(e)){var u=new P(e,r,a,o),l=Object.keys(e);return l.length>=r.minProperties||u.addError({name:"minProperties",argument:r.minProperties,message:"does not meet minimum property length of "+r.minProperties}),u}},$.maxProperties=function(e,r,a,o){if(this.types.object(e)){var u=new P(e,r,a,o),l=Object.keys(e);return l.length<=r.maxProperties||u.addError({name:"maxProperties",argument:r.maxProperties,message:"does not meet maximum property length of "+r.maxProperties}),u}},$.items=function(e,r,a,o){var u=this;if(this.types.array(e)&&r.items){var l=new P(e,r,a,o);return e.every(function(s,m){var p=Array.isArray(r.items)?r.items[m]||r.additionalItems:r.items;if(p===void 0)return!0;if(p===!1)return l.addError({name:"items",message:"additionalItems not permitted"}),!1;var y=u.validateSchema(s,p,a,o.makeChild(p,m));return y.instance!==l.instance[m]&&(l.instance[m]=y.instance),l.importErrors(y),!0}),l}},$.minimum=function(e,r,a,o){if(this.types.number(e)){var u=new P(e,r,a,o);return r.exclusiveMinimum&&r.exclusiveMinimum===!0?e>r.minimum||u.addError({name:"minimum",argument:r.minimum,message:"must be greater than "+r.minimum}):e>=r.minimum||u.addError({name:"minimum",argument:r.minimum,message:"must be greater than or equal to "+r.minimum}),u}},$.maximum=function(e,r,a,o){if(this.types.number(e)){var u=new P(e,r,a,o);return r.exclusiveMaximum&&r.exclusiveMaximum===!0?e<r.maximum||u.addError({name:"maximum",argument:r.maximum,message:"must be less than "+r.maximum}):e<=r.maximum||u.addError({name:"maximum",argument:r.maximum,message:"must be less than or equal to "+r.maximum}),u}},$.exclusiveMinimum=function(e,r,a,o){if(typeof r.exclusiveMaximum!="boolean"&&this.types.number(e)){var u=new P(e,r,a,o),l=e>r.exclusiveMinimum;return l||u.addError({name:"exclusiveMinimum",argument:r.exclusiveMinimum,message:"must be strictly greater than "+r.exclusiveMinimum}),u}},$.exclusiveMaximum=function(e,r,a,o){if(typeof r.exclusiveMaximum!="boolean"&&this.types.number(e)){var u=new P(e,r,a,o),l=e<r.exclusiveMaximum;return l||u.addError({name:"exclusiveMaximum",argument:r.exclusiveMaximum,message:"must be strictly less than "+r.exclusiveMaximum}),u}};var mn=function(e,r,a,o,u,l){if(this.types.number(e)){var s=r[u];if(s==0)throw new Ke(u+" cannot be zero");var m=new P(e,r,a,o),p=be.getDecimalPlaces(e),y=be.getDecimalPlaces(s),g=Math.max(p,y),A=Math.pow(10,g);return Math.round(e*A)%Math.round(s*A)!==0&&m.addError({name:u,argument:s,message:l+JSON.stringify(s)}),m}};$.multipleOf=function(e,r,a,o){return mn.call(this,e,r,a,o,"multipleOf","is not a multiple of (divisible by) ")},$.divisibleBy=function(e,r,a,o){return mn.call(this,e,r,a,o,"divisibleBy","is not divisible by (multiple of) ")},$.required=function(e,r,a,o){var u=new P(e,r,a,o);return e===void 0&&r.required===!0?u.addError({name:"required",message:"is required"}):this.types.object(e)&&Array.isArray(r.required)&&r.required.forEach(function(l){Et(e,l)===void 0&&u.addError({name:"required",argument:l,message:"requires property "+JSON.stringify(l)})}),u},$.pattern=function(e,r,a,o){if(this.types.string(e)){var u=new P(e,r,a,o),l=r.pattern;try{var s=new RegExp(l,"u")}catch{s=new RegExp(l)}return e.match(s)||u.addError({name:"pattern",argument:r.pattern,message:"does not match pattern "+JSON.stringify(r.pattern.toString())}),u}},$.format=function(e,r,a,o){if(e!==void 0){var u=new P(e,r,a,o);return!u.disableFormat&&!be.isFormat(e,r.format,this)&&u.addError({name:"format",argument:r.format,message:"does not conform to the "+JSON.stringify(r.format)+" format"}),u}},$.minLength=function(e,r,a,o){if(this.types.string(e)){var u=new P(e,r,a,o),l=e.match(/[\uDC00-\uDFFF]/g),s=e.length-(l?l.length:0);return s>=r.minLength||u.addError({name:"minLength",argument:r.minLength,message:"does not meet minimum length of "+r.minLength}),u}},$.maxLength=function(e,r,a,o){if(this.types.string(e)){var u=new P(e,r,a,o),l=e.match(/[\uDC00-\uDFFF]/g),s=e.length-(l?l.length:0);return s<=r.maxLength||u.addError({name:"maxLength",argument:r.maxLength,message:"does not meet maximum length of "+r.maxLength}),u}},$.minItems=function(e,r,a,o){if(this.types.array(e)){var u=new P(e,r,a,o);return e.length>=r.minItems||u.addError({name:"minItems",argument:r.minItems,message:"does not meet minimum length of "+r.minItems}),u}},$.maxItems=function(e,r,a,o){if(this.types.array(e)){var u=new P(e,r,a,o);return e.length<=r.maxItems||u.addError({name:"maxItems",argument:r.maxItems,message:"does not meet maximum length of "+r.maxItems}),u}};function Ni(i,e,r){var a,o=r.length;for(a=e+1,o;a<o;a++)if(be.deepCompareStrict(i,r[a]))return!1;return!0}$.uniqueItems=function(e,r,a,o){if(r.uniqueItems===!0&&this.types.array(e)){var u=new P(e,r,a,o);return e.every(Ni)||u.addError({name:"uniqueItems",message:"contains duplicate item"}),u}},$.dependencies=function(e,r,a,o){if(this.types.object(e)){var u=new P(e,r,a,o);for(var l in r.dependencies)if(e[l]!==void 0){var s=r.dependencies[l],m=o.makeChild(s,l);if(typeof s=="string"&&(s=[s]),Array.isArray(s))s.forEach(function(y){e[y]===void 0&&u.addError({name:"dependencies",argument:m.propertyPath,message:"property "+y+" not found, required by "+m.propertyPath})});else{var p=this.validateSchema(e,s,a,m);u.instance!==p.instance&&(u.instance=p.instance),p&&p.errors.length&&(u.addError({name:"dependencies",argument:m.propertyPath,message:"does not meet dependency required by "+m.propertyPath}),u.importErrors(p))}}return u}},$.enum=function(e,r,a,o){if(e===void 0)return null;if(!Array.isArray(r.enum))throw new Ke("enum expects an array",r);var u=new P(e,r,a,o);return r.enum.some(be.deepCompareStrict.bind(null,e))||u.addError({name:"enum",argument:r.enum,message:"is not one of enum values: "+r.enum.map(String).join(",")}),u},$.const=function(e,r,a,o){if(e===void 0)return null;var u=new P(e,r,a,o);return be.deepCompareStrict(r.const,e)||u.addError({name:"const",argument:r.const,message:"does not exactly match expected constant: "+r.const}),u},$.not=$.disallow=function(e,r,a,o){var u=this;if(e===void 0)return null;var l=new P(e,r,a,o),s=r.not||r.disallow;return s?(Array.isArray(s)||(s=[s]),s.forEach(function(m){if(u.testType(e,r,a,o,m)){var p=m&&(m.$id||m.id),y=p||m;l.addError({name:"not",argument:y,message:"is of prohibited type "+y})}}),l):null};var Di=wt,At={},vn=fr,Mi=W;At.SchemaScanResult=yn;function yn(i,e){this.id=i,this.ref=e}At.scan=function(e,r){function a(m,p){if(!(!p||typeof p!="object")){if(p.$ref){var y=vn.resolve(m,p.$ref);s[y]=s[y]?s[y]+1:0;return}var g=p.$id||p.id,A=g?vn.resolve(m,g):m;if(A){if(A.indexOf("#")<0&&(A+="#"),l[A]){if(!Mi.deepCompareStrict(l[A],p))throw new Error("Schema <"+A+"> already exists with different definition");return l[A]}l[A]=p,A[A.length-1]=="#"&&(l[A.substring(0,A.length-1)]=p)}o(A+"/items",Array.isArray(p.items)?p.items:[p.items]),o(A+"/extends",Array.isArray(p.extends)?p.extends:[p.extends]),a(A+"/additionalItems",p.additionalItems),u(A+"/properties",p.properties),a(A+"/additionalProperties",p.additionalProperties),u(A+"/definitions",p.definitions),u(A+"/patternProperties",p.patternProperties),u(A+"/dependencies",p.dependencies),o(A+"/disallow",p.disallow),o(A+"/allOf",p.allOf),o(A+"/anyOf",p.anyOf),o(A+"/oneOf",p.oneOf),a(A+"/not",p.not)}}function o(m,p){if(Array.isArray(p))for(var y=0;y<p.length;y++)a(m+"/"+y,p[y])}function u(m,p){if(!(!p||typeof p!="object"))for(var y in p)a(m+"/"+y,p[y])}var l={},s={};return a(e,r),new yn(l,s)};var gn=fr,wn=Di,rr=W,xn=At.scan,En=rr.ValidatorResult,ki=rr.ValidatorResultError,Er=rr.SchemaError,An=rr.SchemaContext,bn="/",re=function i(){this.customFormats=Object.create(i.prototype.customFormats),this.schemas={},this.unresolvedRefs=[],this.types=Object.create(je),this.attributes=Object.create(wn.validators)};re.prototype.customFormats={},re.prototype.schemas=null,re.prototype.types=null,re.prototype.attributes=null,re.prototype.unresolvedRefs=null,re.prototype.addSchema=function(e,r){var a=this;if(!e)return null;var o=xn(r||bn,e),u=r||e.$id||e.id;for(var l in o.id)this.schemas[l]=o.id[l];for(var l in o.ref)this.unresolvedRefs.push(l);return this.unresolvedRefs=this.unresolvedRefs.filter(function(s){return typeof a.schemas[s]>"u"}),this.schemas[u]},re.prototype.addSubSchemaArray=function(e,r){if(Array.isArray(r))for(var a=0;a<r.length;a++)this.addSubSchema(e,r[a])},re.prototype.addSubSchemaObject=function(e,r){if(!(!r||typeof r!="object"))for(var a in r)this.addSubSchema(e,r[a])},re.prototype.setSchemas=function(e){this.schemas=e},re.prototype.getSchema=function(e){return this.schemas[e]},re.prototype.validate=function(e,r,a,o){if(typeof r!="boolean"&&typeof r!="object"||r===null)throw new Er("Expected `schema` to be an object or boolean");a||(a={});var u=r.$id||r.id,l=gn.resolve(a.base||bn,u||"");if(!o){o=new An(r,a,[],l,Object.create(this.schemas)),o.schemas[l]||(o.schemas[l]=r);var s=xn(l,r);for(var m in s.id){var p=s.id[m];o.schemas[m]=p}}if(a.required&&e===void 0){var y=new En(e,r,a,o);return y.addError("is required, but is undefined"),y}var y=this.validateSchema(e,r,a,o);if(y){if(a.throwAll&&y.errors.length)throw new ki(y)}else throw new Error("Result undefined");return y};function Sn(i){var e=typeof i=="string"?i:i.$ref;return typeof e=="string"?e:!1}re.prototype.validateSchema=function(e,r,a,o){var u=new En(e,r,a,o);if(typeof r=="boolean")r===!0?r={}:r===!1&&(r={type:[]});else if(!r)throw new Error("schema is undefined");if(r.extends)if(Array.isArray(r.extends)){var l={schema:r,ctx:o};r.extends.forEach(this.schemaTraverser.bind(this,l)),r=l.schema,l.schema=null,l.ctx=null,l=null}else r=rr.deepMerge(r,this.superResolve(r.extends,o));var s=Sn(r);if(s){var m=this.resolve(r,s,o),p=new An(m.subschema,a,o.path,m.switchSchema,o.schemas);return this.validateSchema(e,m.subschema,a,p)}var y=a&&a.skipAttributes||[];for(var g in r)if(!wn.ignoreProperties[g]&&y.indexOf(g)<0){var A=null,O=this.attributes[g];if(O)A=O.call(this,e,r,a,o);else if(a.allowUnknownAttributes===!1)throw new Er("Unsupported attribute: "+g,r);A&&u.importErrors(A)}if(typeof a.rewrite=="function"){var _=a.rewrite.call(this,e,r,a,o);u.instance=_}return u},re.prototype.schemaTraverser=function(e,r){e.schema=rr.deepMerge(e.schema,this.superResolve(r,e.ctx))},re.prototype.superResolve=function(e,r){var a=Sn(e);return a?this.resolve(e,a,r).subschema:e},re.prototype.resolve=function(e,r,a){if(r=a.resolve(r),a.schemas[r])return{subschema:a.schemas[r],switchSchema:r};var o=gn.parse(r),u=o&&o.hash,l=u&&u.length&&r.substr(0,r.length-u.length);if(!l||!a.schemas[l])throw new Er("no such schema <"+r+">",e);var s=rr.objectGetPath(a.schemas[l],u.substr(1));if(s===void 0)throw new Er("no such schema "+u+" located in <"+l+">",e);return{subschema:s,switchSchema:r}},re.prototype.testType=function(e,r,a,o,u){if(u!==void 0){if(u===null)throw new Er('Unexpected null in "type" keyword');if(typeof this.types[u]=="function")return this.types[u].call(this,e);if(u&&typeof u=="object"){var l=this.validateSchema(e,u,a,o);return l===void 0||!(l&&l.errors.length)}return!0}};var je=re.prototype.types={};je.string=function(e){return typeof e=="string"},je.number=function(e){return typeof e=="number"&&isFinite(e)},je.integer=function(e){return typeof e=="number"&&e%1===0},je.boolean=function(e){return typeof e=="boolean"},je.array=function(e){return Array.isArray(e)},je.null=function(e){return e===null},je.date=function(e){return e instanceof Date},je.any=function(e){return!0},je.object=function(e){return e&&typeof e=="object"&&!Array.isArray(e)&&!(e instanceof Date)};var zi=re,Fn;Fn=zi,W.ValidatorResult,W.ValidatorResultError,W.ValidationError,W.SchemaError;const te=new Fn,Zi={id:"/Evidence",type:"object",properties:{name:{type:"string"},value:{type:"string"}},required:["name","value"]};te.addSchema(Zi,"/Evidence");const Vi={id:"/Evidences",type:"array",items:{$ref:"/Evidence"},minItems:1};te.addSchema(Vi,"/Evidences");const Wi={id:"/ExtendedEvidences",oneOf:[{$ref:"/Evidences"},{type:"object",patternProperties:{".+":{type:"String"}},minProperties:1}]};te.addSchema(Wi,"/ExtendedEvidences");const Hi={id:"/Instance",type:"object",properties:{className:{type:"string"},propertyName:{type:"string"},value:{type:"any"},dependencyContext:{type:"object",properties:{evidences:{$ref:"/Evidences"}}}},required:["className","propertyName","value"]};te.addSchema(Hi,"/Instance");const Ji={id:"/InputInstances",type:"array",items:{type:"object",properties:{className:{type:"string"},propertyName:{type:"string"},value:{type:"any"}},required:["className","propertyName"],minItems:1}};te.addSchema(Ji,"/InputInstances");const Xi={id:"/Instances",type:"array",items:{$ref:"/Instance"},minItems:1};te.addSchema(Xi,"/Instances");const Gi={id:"/Context",type:"object",properties:{guid:{type:"string"},evidences:{$ref:"/Evidences"}},required:["guid","evidences"]};te.addSchema(Gi,"/Context");const Ki={id:"/InputContext",type:"object",properties:{evidences:{$ref:"/ExtendedEvidences"}},required:["evidences"]};te.addSchema(Ki,"/InputContext");const Yi={id:"/RightsContexts",type:"Array",items:{$ref:"/Context"},minItems:1};te.addSchema(Yi,"/RightsContexts");const Qi={id:"/ProcessingContexts",type:"Array",items:{$ref:"/Context"},minItems:0};te.addSchema(Qi,"/ProcessingContexts");const ea={id:"/Requests",type:"Array",items:{type:"object",properties:{guid:{type:"string"},rightsContext:{type:"string"},processingContext:{type:"string"},instances:{$ref:"/Instances"}},required:["guid","rightsContext","instances"]},minItems:1};te.addSchema(ea,"/Requests");const ra={id:"RequestData",type:"object",properties:{processingContexts:{$ref:"/ProcessingContexts"},rightsContexts:{$ref:"/RightsContexts"},requests:{$ref:"/Requests"}},required:["rightsContexts","requests"]};te.addSchema(ra,"/RequestData");const ta={id:"RequestInputData",type:"object",properties:{processingContext:{$ref:"/InputContext"},rightsContext:{$ref:"/InputContext"},instances:{$ref:"InputInstances"}},required:["rightsContext","instances"]};te.addSchema(ta,"/RequestInputData");class Ie{constructor(e){this.rules=e,this.errors=[]}validate(){return this.errors=this.rules.filter(({rule:e})=>!e).map(({message:e})=>e),this.errors.length===0}validateWithThrowError(){const e=this.validate(),r=this.errors.join(`\r
`);if(e)return e;throw new Error(r)}}class bt{constructor({name:e,value:r}){bt.validateEvidence({name:e,value:r}),this.name=e,this.value=r}static validateEvidence(e,r=!0){const a=te.validate(e,{$ref:"/Evidence"}),o=new Ie([{rule:a.valid,message:'Invalid "evidence" format/structure'}]);return r?o.validateWithThrowError():o.validate()}}const tr=i=>i!=null&&typeof i=="object",St=(i,e)=>{const r=Object.keys(i),a=Object.keys(e);if(r.length!==a.length)return!1;for(const o of r){const u=i[o],l=e[o],s=tr(u)&&tr(l);if(s&&!St(u,l)||!s&&u!==l)return!1}return!0},Tn=(i,e,r)=>i.reduce((a,o)=>({...a,[o[e]]:o[r]}),{}),Ft=(i={},e="name",r="value")=>Object.entries(i).reduce((a,[o,u])=>[...a,{[e]:o,[r]:u}],[]),na=Object.freeze(Object.defineProperty({__proto__:null,deepEqual:St,isObject:tr,makeArrayFromDictionary:Ft,makeDictionary:Tn},Symbol.toStringTag,{value:"Module"}));class Mr{constructor({className:e,propertyName:r,value:a,dependencies:o=null}={}){Mr.validateValue({className:e,propertyName:r,value:a}),this.className=e,this.propertyName=r,this.value=a,this.dependencies=tr(o)?o:null,this.error=null,this.transformed=null}get original(){return this.value}setError(e){this.error=e}setTransformedValue(e){this.transformed=e}static validateValue(e,r=!0){const{className:a,propertyName:o,value:u}=e,l=te.validate(e,{$ref:"/Instance"}),s=new Ie([{rule:!!a,message:'Required property "className" is missing or empty'},{rule:!!o,message:'Required property "propertyName" is missing or empty'},{rule:typeof u<"u",message:'Required property "value" is undefined'},{rule:l.valid,message:'Invalid "requestData" format/structure'}]);return r?s.validateWithThrowError():s.validate()}}class Tt{constructor(e){Tt.validateEvidences(e),this.evidences=e}static validateEvidences(e,r=!0){const a=te.validate(e,{$ref:"/ExtendedEvidences"}),o=new Ie([{rule:!!e,message:'Required parameter "evidences" is missing'},{rule:a.valid,message:'Invalid "evidences" format/structure'}]);return r?o.validateWithThrowError():o.validate()}}var Ct={},ia={get exports(){return Ct},set exports(i){Ct=i}},kr={},aa={get exports(){return kr},set exports(i){kr=i}},Cn=function(e,r){return function(){for(var o=new Array(arguments.length),u=0;u<o.length;u++)o[u]=arguments[u];return e.apply(r,o)}},oa=Cn,nr=Object.prototype.toString;function Rt(i){return nr.call(i)==="[object Array]"}function It(i){return typeof i>"u"}function sa(i){return i!==null&&!It(i)&&i.constructor!==null&&!It(i.constructor)&&typeof i.constructor.isBuffer=="function"&&i.constructor.isBuffer(i)}function ua(i){return nr.call(i)==="[object ArrayBuffer]"}function fa(i){return typeof FormData<"u"&&i instanceof FormData}function la(i){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(i):e=i&&i.buffer&&i.buffer instanceof ArrayBuffer,e}function ha(i){return typeof i=="string"}function ca(i){return typeof i=="number"}function Rn(i){return i!==null&&typeof i=="object"}function zr(i){if(nr.call(i)!=="[object Object]")return!1;var e=Object.getPrototypeOf(i);return e===null||e===Object.prototype}function da(i){return nr.call(i)==="[object Date]"}function pa(i){return nr.call(i)==="[object File]"}function ma(i){return nr.call(i)==="[object Blob]"}function In(i){return nr.call(i)==="[object Function]"}function va(i){return Rn(i)&&In(i.pipe)}function ya(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}function ga(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function wa(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Ot(i,e){if(!(i===null||typeof i>"u"))if(typeof i!="object"&&(i=[i]),Rt(i))for(var r=0,a=i.length;r<a;r++)e.call(null,i[r],r,i);else for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&e.call(null,i[o],o,i)}function Ut(){var i={};function e(o,u){zr(i[u])&&zr(o)?i[u]=Ut(i[u],o):zr(o)?i[u]=Ut({},o):Rt(o)?i[u]=o.slice():i[u]=o}for(var r=0,a=arguments.length;r<a;r++)Ot(arguments[r],e);return i}function xa(i,e,r){return Ot(e,function(o,u){r&&typeof o=="function"?i[u]=oa(o,r):i[u]=o}),i}function Ea(i){return i.charCodeAt(0)===65279&&(i=i.slice(1)),i}var me={isArray:Rt,isArrayBuffer:ua,isBuffer:sa,isFormData:fa,isArrayBufferView:la,isString:ha,isNumber:ca,isObject:Rn,isPlainObject:zr,isUndefined:It,isDate:da,isFile:pa,isBlob:ma,isFunction:In,isStream:va,isURLSearchParams:ya,isStandardBrowserEnv:wa,forEach:Ot,merge:Ut,extend:xa,trim:ga,stripBOM:Ea},lr=me;function On(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Un=function(e,r,a){if(!r)return e;var o;if(a)o=a(r);else if(lr.isURLSearchParams(r))o=r.toString();else{var u=[];lr.forEach(r,function(m,p){m===null||typeof m>"u"||(lr.isArray(m)?p=p+"[]":m=[m],lr.forEach(m,function(g){lr.isDate(g)?g=g.toISOString():lr.isObject(g)&&(g=JSON.stringify(g)),u.push(On(p)+"="+On(g))}))}),o=u.join("&")}if(o){var l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e},Aa=me;function Zr(){this.handlers=[]}Zr.prototype.use=function(e,r,a){return this.handlers.push({fulfilled:e,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1},Zr.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},Zr.prototype.forEach=function(e){Aa.forEach(this.handlers,function(a){a!==null&&e(a)})};var ba=Zr,Sa={},Vr={};Vr.byteLength=Ca,Vr.toByteArray=Ia,Vr.fromByteArray=Pa;for(var Le=[],Se=[],Fa=typeof Uint8Array<"u"?Uint8Array:Array,Pt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",hr=0,Ta=Pt.length;hr<Ta;++hr)Le[hr]=Pt[hr],Se[Pt.charCodeAt(hr)]=hr;Se["-".charCodeAt(0)]=62,Se["_".charCodeAt(0)]=63;function Pn(i){var e=i.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=i.indexOf("=");r===-1&&(r=e);var a=r===e?0:4-r%4;return[r,a]}function Ca(i){var e=Pn(i),r=e[0],a=e[1];return(r+a)*3/4-a}function Ra(i,e,r){return(e+r)*3/4-r}function Ia(i){var e,r=Pn(i),a=r[0],o=r[1],u=new Fa(Ra(i,a,o)),l=0,s=o>0?a-4:a,m;for(m=0;m<s;m+=4)e=Se[i.charCodeAt(m)]<<18|Se[i.charCodeAt(m+1)]<<12|Se[i.charCodeAt(m+2)]<<6|Se[i.charCodeAt(m+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=e&255;return o===2&&(e=Se[i.charCodeAt(m)]<<2|Se[i.charCodeAt(m+1)]>>4,u[l++]=e&255),o===1&&(e=Se[i.charCodeAt(m)]<<10|Se[i.charCodeAt(m+1)]<<4|Se[i.charCodeAt(m+2)]>>2,u[l++]=e>>8&255,u[l++]=e&255),u}function Oa(i){return Le[i>>18&63]+Le[i>>12&63]+Le[i>>6&63]+Le[i&63]}function Ua(i,e,r){for(var a,o=[],u=e;u<r;u+=3)a=(i[u]<<16&16711680)+(i[u+1]<<8&65280)+(i[u+2]&255),o.push(Oa(a));return o.join("")}function Pa(i){for(var e,r=i.length,a=r%3,o=[],u=16383,l=0,s=r-a;l<s;l+=u)o.push(Ua(i,l,l+u>s?s:l+u));return a===1?(e=i[r-1],o.push(Le[e>>2]+Le[e<<4&63]+"==")):a===2&&(e=(i[r-2]<<8)+i[r-1],o.push(Le[e>>10]+Le[e>>4&63]+Le[e<<2&63]+"=")),o.join("")}var $t={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */$t.read=function(i,e,r,a,o){var u,l,s=o*8-a-1,m=(1<<s)-1,p=m>>1,y=-7,g=r?o-1:0,A=r?-1:1,O=i[e+g];for(g+=A,u=O&(1<<-y)-1,O>>=-y,y+=s;y>0;u=u*256+i[e+g],g+=A,y-=8);for(l=u&(1<<-y)-1,u>>=-y,y+=a;y>0;l=l*256+i[e+g],g+=A,y-=8);if(u===0)u=1-p;else{if(u===m)return l?NaN:(O?-1:1)*(1/0);l=l+Math.pow(2,a),u=u-p}return(O?-1:1)*l*Math.pow(2,u-a)},$t.write=function(i,e,r,a,o,u){var l,s,m,p=u*8-o-1,y=(1<<p)-1,g=y>>1,A=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,O=a?0:u-1,_=a?1:-1,N=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,l=y):(l=Math.floor(Math.log(e)/Math.LN2),e*(m=Math.pow(2,-l))<1&&(l--,m*=2),l+g>=1?e+=A/m:e+=A*Math.pow(2,1-g),e*m>=2&&(l++,m/=2),l+g>=y?(s=0,l=y):l+g>=1?(s=(e*m-1)*Math.pow(2,o),l=l+g):(s=e*Math.pow(2,g-1)*Math.pow(2,o),l=0));o>=8;i[r+O]=s&255,O+=_,s/=256,o-=8);for(l=l<<o|s,p+=o;p>0;i[r+O]=l&255,O+=_,l/=256,p-=8);i[r+O-_]|=N*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(i){var e=Vr,r=$t,a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=s,i.SlowBuffer=Te,i.INSPECT_MAX_BYTES=50;var o=2147483647;i.kMaxLength=o,s.TYPED_ARRAY_SUPPORT=u(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{var f=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(f,t),f.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function l(f){if(f>o)throw new RangeError('The value "'+f+'" is invalid for option "size"');var t=new Uint8Array(f);return Object.setPrototypeOf(t,s.prototype),t}function s(f,t,n){if(typeof f=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(f)}return m(f,t,n)}s.poolSize=8192;function m(f,t,n){if(typeof f=="string")return A(f,t);if(ArrayBuffer.isView(f))return _(f);if(f==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(z(f,ArrayBuffer)||f&&z(f.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(z(f,SharedArrayBuffer)||f&&z(f.buffer,SharedArrayBuffer)))return N(f,t,n);if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var h=f.valueOf&&f.valueOf();if(h!=null&&h!==f)return s.from(h,t,n);var v=Ue(f);if(v)return v;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof f[Symbol.toPrimitive]=="function")return s.from(f[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f)}s.from=function(f,t,n){return m(f,t,n)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function p(f){if(typeof f!="number")throw new TypeError('"size" argument must be of type number');if(f<0)throw new RangeError('The value "'+f+'" is invalid for option "size"')}function y(f,t,n){return p(f),f<=0?l(f):t!==void 0?typeof n=="string"?l(f).fill(t,n):l(f).fill(t):l(f)}s.alloc=function(f,t,n){return y(f,t,n)};function g(f){return p(f),l(f<0?0:ye(f)|0)}s.allocUnsafe=function(f){return g(f)},s.allocUnsafeSlow=function(f){return g(f)};function A(f,t){if((typeof t!="string"||t==="")&&(t="utf8"),!s.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=Xe(f,t)|0,h=l(n),v=h.write(f,t);return v!==n&&(h=h.slice(0,v)),h}function O(f){for(var t=f.length<0?0:ye(f.length)|0,n=l(t),h=0;h<t;h+=1)n[h]=f[h]&255;return n}function _(f){if(z(f,Uint8Array)){var t=new Uint8Array(f);return N(t.buffer,t.byteOffset,t.byteLength)}return O(f)}function N(f,t,n){if(t<0||f.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var h;return t===void 0&&n===void 0?h=new Uint8Array(f):n===void 0?h=new Uint8Array(f,t):h=new Uint8Array(f,t,n),Object.setPrototypeOf(h,s.prototype),h}function Ue(f){if(s.isBuffer(f)){var t=ye(f.length)|0,n=l(t);return n.length===0||f.copy(n,0,0,t),n}if(f.length!==void 0)return typeof f.length!="number"||de(f.length)?l(0):O(f);if(f.type==="Buffer"&&Array.isArray(f.data))return O(f.data)}function ye(f){if(f>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return f|0}function Te(f){return+f!=f&&(f=0),s.alloc(+f)}s.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==s.prototype},s.compare=function(t,n){if(z(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),z(n,Uint8Array)&&(n=s.from(n,n.offset,n.byteLength)),!s.isBuffer(t)||!s.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===n)return 0;for(var h=t.length,v=n.length,w=0,E=Math.min(h,v);w<E;++w)if(t[w]!==n[w]){h=t[w],v=n[w];break}return h<v?-1:v<h?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,n){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return s.alloc(0);var h;if(n===void 0)for(n=0,h=0;h<t.length;++h)n+=t[h].length;var v=s.allocUnsafe(n),w=0;for(h=0;h<t.length;++h){var E=t[h];if(z(E,Uint8Array))w+E.length>v.length?s.from(E).copy(v,w):Uint8Array.prototype.set.call(v,E,w);else if(s.isBuffer(E))E.copy(v,w);else throw new TypeError('"list" argument must be an Array of Buffers');w+=E.length}return v};function Xe(f,t){if(s.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||z(f,ArrayBuffer))return f.byteLength;if(typeof f!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);var n=f.length,h=arguments.length>2&&arguments[2]===!0;if(!h&&n===0)return 0;for(var v=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return ie(f).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return X(f).length;default:if(v)return h?-1:ie(f).length;t=(""+t).toLowerCase(),v=!0}}s.byteLength=Xe;function R(f,t,n){var h=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,t>>>=0,n<=t))return"";for(f||(f="utf8");;)switch(f){case"hex":return Pr(this,t,n);case"utf8":case"utf-8":return Ee(this,t,n);case"ascii":return yr(this,t,n);case"latin1":case"binary":return Ur(this,t,n);case"base64":return Ce(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,t,n);default:if(h)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase(),h=!0}}s.prototype._isBuffer=!0;function M(f,t,n){var h=f[t];f[t]=f[n],f[n]=h}s.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<t;n+=2)M(this,n,n+1);return this},s.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<t;n+=4)M(this,n,n+3),M(this,n+1,n+2);return this},s.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<t;n+=8)M(this,n,n+7),M(this,n+1,n+6),M(this,n+2,n+5),M(this,n+3,n+4);return this},s.prototype.toString=function(){var t=this.length;return t===0?"":arguments.length===0?Ee(this,0,t):R.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:s.compare(this,t)===0},s.prototype.inspect=function(){var t="",n=i.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},a&&(s.prototype[a]=s.prototype.inspect),s.prototype.compare=function(t,n,h,v,w){if(z(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(n===void 0&&(n=0),h===void 0&&(h=t?t.length:0),v===void 0&&(v=0),w===void 0&&(w=this.length),n<0||h>t.length||v<0||w>this.length)throw new RangeError("out of range index");if(v>=w&&n>=h)return 0;if(v>=w)return-1;if(n>=h)return 1;if(n>>>=0,h>>>=0,v>>>=0,w>>>=0,this===t)return 0;for(var E=w-v,U=h-n,c=Math.min(E,U),x=this.slice(v,w),d=t.slice(n,h),b=0;b<c;++b)if(x[b]!==d[b]){E=x[b],U=d[b];break}return E<U?-1:U<E?1:0};function ge(f,t,n,h,v){if(f.length===0)return-1;if(typeof n=="string"?(h=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,de(n)&&(n=v?0:f.length-1),n<0&&(n=f.length+n),n>=f.length){if(v)return-1;n=f.length-1}else if(n<0)if(v)n=0;else return-1;if(typeof t=="string"&&(t=s.from(t,h)),s.isBuffer(t))return t.length===0?-1:we(f,t,n,h,v);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?v?Uint8Array.prototype.indexOf.call(f,t,n):Uint8Array.prototype.lastIndexOf.call(f,t,n):we(f,[t],n,h,v);throw new TypeError("val must be string, number or Buffer")}function we(f,t,n,h,v){var w=1,E=f.length,U=t.length;if(h!==void 0&&(h=String(h).toLowerCase(),h==="ucs2"||h==="ucs-2"||h==="utf16le"||h==="utf-16le")){if(f.length<2||t.length<2)return-1;w=2,E/=2,U/=2,n/=2}function c(ue,ae){return w===1?ue[ae]:ue.readUInt16BE(ae*w)}var x;if(v){var d=-1;for(x=n;x<E;x++)if(c(f,x)===c(t,d===-1?0:x-d)){if(d===-1&&(d=x),x-d+1===U)return d*w}else d!==-1&&(x-=x-d),d=-1}else for(n+U>E&&(n=E-U),x=n;x>=0;x--){for(var b=!0,q=0;q<U;q++)if(c(f,x+q)!==c(t,q)){b=!1;break}if(b)return x}return-1}s.prototype.includes=function(t,n,h){return this.indexOf(t,n,h)!==-1},s.prototype.indexOf=function(t,n,h){return ge(this,t,n,h,!0)},s.prototype.lastIndexOf=function(t,n,h){return ge(this,t,n,h,!1)};function he(f,t,n,h){n=Number(n)||0;var v=f.length-n;h?(h=Number(h),h>v&&(h=v)):h=v;var w=t.length;h>w/2&&(h=w/2);for(var E=0;E<h;++E){var U=parseInt(t.substr(E*2,2),16);if(de(U))return E;f[n+E]=U}return E}function Me(f,t,n,h){return Y(ie(t,f.length-n),f,n,h)}function ne(f,t,n,h){return Y(ce(t),f,n,h)}function xe(f,t,n,h){return Y(X(t),f,n,h)}function se(f,t,n,h){return Y(Ae(t,f.length-n),f,n,h)}s.prototype.write=function(t,n,h,v){if(n===void 0)v="utf8",h=this.length,n=0;else if(h===void 0&&typeof n=="string")v=n,h=this.length,n=0;else if(isFinite(n))n=n>>>0,isFinite(h)?(h=h>>>0,v===void 0&&(v="utf8")):(v=h,h=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var w=this.length-n;if((h===void 0||h>w)&&(h=w),t.length>0&&(h<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");v||(v="utf8");for(var E=!1;;)switch(v){case"hex":return he(this,t,n,h);case"utf8":case"utf-8":return Me(this,t,n,h);case"ascii":case"latin1":case"binary":return ne(this,t,n,h);case"base64":return xe(this,t,n,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return se(this,t,n,h);default:if(E)throw new TypeError("Unknown encoding: "+v);v=(""+v).toLowerCase(),E=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ce(f,t,n){return t===0&&n===f.length?e.fromByteArray(f):e.fromByteArray(f.slice(t,n))}function Ee(f,t,n){n=Math.min(f.length,n);for(var h=[],v=t;v<n;){var w=f[v],E=null,U=w>239?4:w>223?3:w>191?2:1;if(v+U<=n){var c,x,d,b;switch(U){case 1:w<128&&(E=w);break;case 2:c=f[v+1],(c&192)===128&&(b=(w&31)<<6|c&63,b>127&&(E=b));break;case 3:c=f[v+1],x=f[v+2],(c&192)===128&&(x&192)===128&&(b=(w&15)<<12|(c&63)<<6|x&63,b>2047&&(b<55296||b>57343)&&(E=b));break;case 4:c=f[v+1],x=f[v+2],d=f[v+3],(c&192)===128&&(x&192)===128&&(d&192)===128&&(b=(w&15)<<18|(c&63)<<12|(x&63)<<6|d&63,b>65535&&b<1114112&&(E=b))}}E===null?(E=65533,U=1):E>65535&&(E-=65536,h.push(E>>>10&1023|55296),E=56320|E&1023),h.push(E),v+=U}return vr(h)}var Pe=4096;function vr(f){var t=f.length;if(t<=Pe)return String.fromCharCode.apply(String,f);for(var n="",h=0;h<t;)n+=String.fromCharCode.apply(String,f.slice(h,h+=Pe));return n}function yr(f,t,n){var h="";n=Math.min(f.length,n);for(var v=t;v<n;++v)h+=String.fromCharCode(f[v]&127);return h}function Ur(f,t,n){var h="";n=Math.min(f.length,n);for(var v=t;v<n;++v)h+=String.fromCharCode(f[v]);return h}function Pr(f,t,n){var h=f.length;(!t||t<0)&&(t=0),(!n||n<0||n>h)&&(n=h);for(var v="",w=t;w<n;++w)v+=$e[f[w]];return v}function F(f,t,n){for(var h=f.slice(t,n),v="",w=0;w<h.length-1;w+=2)v+=String.fromCharCode(h[w]+h[w+1]*256);return v}s.prototype.slice=function(t,n){var h=this.length;t=~~t,n=n===void 0?h:~~n,t<0?(t+=h,t<0&&(t=0)):t>h&&(t=h),n<0?(n+=h,n<0&&(n=0)):n>h&&(n=h),n<t&&(n=t);var v=this.subarray(t,n);return Object.setPrototypeOf(v,s.prototype),v};function S(f,t,n){if(f%1!==0||f<0)throw new RangeError("offset is not uint");if(f+t>n)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(t,n,h){t=t>>>0,n=n>>>0,h||S(t,n,this.length);for(var v=this[t],w=1,E=0;++E<n&&(w*=256);)v+=this[t+E]*w;return v},s.prototype.readUintBE=s.prototype.readUIntBE=function(t,n,h){t=t>>>0,n=n>>>0,h||S(t,n,this.length);for(var v=this[t+--n],w=1;n>0&&(w*=256);)v+=this[t+--n]*w;return v},s.prototype.readUint8=s.prototype.readUInt8=function(t,n){return t=t>>>0,n||S(t,1,this.length),this[t]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(t,n){return t=t>>>0,n||S(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(t,n){return t=t>>>0,n||S(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(t,n){return t=t>>>0,n||S(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(t,n){return t=t>>>0,n||S(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,n,h){t=t>>>0,n=n>>>0,h||S(t,n,this.length);for(var v=this[t],w=1,E=0;++E<n&&(w*=256);)v+=this[t+E]*w;return w*=128,v>=w&&(v-=Math.pow(2,8*n)),v},s.prototype.readIntBE=function(t,n,h){t=t>>>0,n=n>>>0,h||S(t,n,this.length);for(var v=n,w=1,E=this[t+--v];v>0&&(w*=256);)E+=this[t+--v]*w;return w*=128,E>=w&&(E-=Math.pow(2,8*n)),E},s.prototype.readInt8=function(t,n){return t=t>>>0,n||S(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]},s.prototype.readInt16LE=function(t,n){t=t>>>0,n||S(t,2,this.length);var h=this[t]|this[t+1]<<8;return h&32768?h|4294901760:h},s.prototype.readInt16BE=function(t,n){t=t>>>0,n||S(t,2,this.length);var h=this[t+1]|this[t]<<8;return h&32768?h|4294901760:h},s.prototype.readInt32LE=function(t,n){return t=t>>>0,n||S(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,n){return t=t>>>0,n||S(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,n){return t=t>>>0,n||S(t,4,this.length),r.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,n){return t=t>>>0,n||S(t,4,this.length),r.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,n){return t=t>>>0,n||S(t,8,this.length),r.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,n){return t=t>>>0,n||S(t,8,this.length),r.read(this,t,!1,52,8)};function C(f,t,n,h,v,w){if(!s.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>v||t<w)throw new RangeError('"value" argument is out of bounds');if(n+h>f.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(t,n,h,v){if(t=+t,n=n>>>0,h=h>>>0,!v){var w=Math.pow(2,8*h)-1;C(this,t,n,h,w,0)}var E=1,U=0;for(this[n]=t&255;++U<h&&(E*=256);)this[n+U]=t/E&255;return n+h},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(t,n,h,v){if(t=+t,n=n>>>0,h=h>>>0,!v){var w=Math.pow(2,8*h)-1;C(this,t,n,h,w,0)}var E=h-1,U=1;for(this[n+E]=t&255;--E>=0&&(U*=256);)this[n+E]=t/U&255;return n+h},s.prototype.writeUint8=s.prototype.writeUInt8=function(t,n,h){return t=+t,n=n>>>0,h||C(this,t,n,1,255,0),this[n]=t&255,n+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(t,n,h){return t=+t,n=n>>>0,h||C(this,t,n,2,65535,0),this[n]=t&255,this[n+1]=t>>>8,n+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(t,n,h){return t=+t,n=n>>>0,h||C(this,t,n,2,65535,0),this[n]=t>>>8,this[n+1]=t&255,n+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(t,n,h){return t=+t,n=n>>>0,h||C(this,t,n,4,4294967295,0),this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=t&255,n+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(t,n,h){return t=+t,n=n>>>0,h||C(this,t,n,4,4294967295,0),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4},s.prototype.writeIntLE=function(t,n,h,v){if(t=+t,n=n>>>0,!v){var w=Math.pow(2,8*h-1);C(this,t,n,h,w-1,-w)}var E=0,U=1,c=0;for(this[n]=t&255;++E<h&&(U*=256);)t<0&&c===0&&this[n+E-1]!==0&&(c=1),this[n+E]=(t/U>>0)-c&255;return n+h},s.prototype.writeIntBE=function(t,n,h,v){if(t=+t,n=n>>>0,!v){var w=Math.pow(2,8*h-1);C(this,t,n,h,w-1,-w)}var E=h-1,U=1,c=0;for(this[n+E]=t&255;--E>=0&&(U*=256);)t<0&&c===0&&this[n+E+1]!==0&&(c=1),this[n+E]=(t/U>>0)-c&255;return n+h},s.prototype.writeInt8=function(t,n,h){return t=+t,n=n>>>0,h||C(this,t,n,1,127,-128),t<0&&(t=255+t+1),this[n]=t&255,n+1},s.prototype.writeInt16LE=function(t,n,h){return t=+t,n=n>>>0,h||C(this,t,n,2,32767,-32768),this[n]=t&255,this[n+1]=t>>>8,n+2},s.prototype.writeInt16BE=function(t,n,h){return t=+t,n=n>>>0,h||C(this,t,n,2,32767,-32768),this[n]=t>>>8,this[n+1]=t&255,n+2},s.prototype.writeInt32LE=function(t,n,h){return t=+t,n=n>>>0,h||C(this,t,n,4,2147483647,-2147483648),this[n]=t&255,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24,n+4},s.prototype.writeInt32BE=function(t,n,h){return t=+t,n=n>>>0,h||C(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4};function j(f,t,n,h,v,w){if(n+h>f.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(f,t,n,h,v){return t=+t,n=n>>>0,v||j(f,t,n,4),r.write(f,t,n,h,23,4),n+4}s.prototype.writeFloatLE=function(t,n,h){return D(this,t,n,!0,h)},s.prototype.writeFloatBE=function(t,n,h){return D(this,t,n,!1,h)};function J(f,t,n,h,v){return t=+t,n=n>>>0,v||j(f,t,n,8),r.write(f,t,n,h,52,8),n+8}s.prototype.writeDoubleLE=function(t,n,h){return J(this,t,n,!0,h)},s.prototype.writeDoubleBE=function(t,n,h){return J(this,t,n,!1,h)},s.prototype.copy=function(t,n,h,v){if(!s.isBuffer(t))throw new TypeError("argument should be a Buffer");if(h||(h=0),!v&&v!==0&&(v=this.length),n>=t.length&&(n=t.length),n||(n=0),v>0&&v<h&&(v=h),v===h||t.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(h<0||h>=this.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("sourceEnd out of bounds");v>this.length&&(v=this.length),t.length-n<v-h&&(v=t.length-n+h);var w=v-h;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(n,h,v):Uint8Array.prototype.set.call(t,this.subarray(h,v),n),w},s.prototype.fill=function(t,n,h,v){if(typeof t=="string"){if(typeof n=="string"?(v=n,n=0,h=this.length):typeof h=="string"&&(v=h,h=this.length),v!==void 0&&typeof v!="string")throw new TypeError("encoding must be a string");if(typeof v=="string"&&!s.isEncoding(v))throw new TypeError("Unknown encoding: "+v);if(t.length===1){var w=t.charCodeAt(0);(v==="utf8"&&w<128||v==="latin1")&&(t=w)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(n<0||this.length<n||this.length<h)throw new RangeError("Out of range index");if(h<=n)return this;n=n>>>0,h=h===void 0?this.length:h>>>0,t||(t=0);var E;if(typeof t=="number")for(E=n;E<h;++E)this[E]=t;else{var U=s.isBuffer(t)?t:s.from(t,v),c=U.length;if(c===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(E=0;E<h-n;++E)this[E+n]=U[E%c]}return this};var Z=/[^+/0-9A-Za-z-_]/g;function k(f){if(f=f.split("=")[0],f=f.trim().replace(Z,""),f.length<2)return"";for(;f.length%4!==0;)f=f+"=";return f}function ie(f,t){t=t||1/0;for(var n,h=f.length,v=null,w=[],E=0;E<h;++E){if(n=f.charCodeAt(E),n>55295&&n<57344){if(!v){if(n>56319){(t-=3)>-1&&w.push(239,191,189);continue}else if(E+1===h){(t-=3)>-1&&w.push(239,191,189);continue}v=n;continue}if(n<56320){(t-=3)>-1&&w.push(239,191,189),v=n;continue}n=(v-55296<<10|n-56320)+65536}else v&&(t-=3)>-1&&w.push(239,191,189);if(v=null,n<128){if((t-=1)<0)break;w.push(n)}else if(n<2048){if((t-=2)<0)break;w.push(n>>6|192,n&63|128)}else if(n<65536){if((t-=3)<0)break;w.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((t-=4)<0)break;w.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return w}function ce(f){for(var t=[],n=0;n<f.length;++n)t.push(f.charCodeAt(n)&255);return t}function Ae(f,t){for(var n,h,v,w=[],E=0;E<f.length&&!((t-=2)<0);++E)n=f.charCodeAt(E),h=n>>8,v=n%256,w.push(v),w.push(h);return w}function X(f){return e.toByteArray(k(f))}function Y(f,t,n,h){for(var v=0;v<h&&!(v+n>=t.length||v>=f.length);++v)t[v+n]=f[v];return v}function z(f,t){return f instanceof t||f!=null&&f.constructor!=null&&f.constructor.name!=null&&f.constructor.name===t.name}function de(f){return f!==f}var $e=function(){for(var f="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var h=n*16,v=0;v<16;++v)t[h+v]=f[n]+f[v];return t}()})(Sa);var Wr={},$a={get exports(){return Wr},set exports(i){Wr=i}},H=$a.exports={},_e,Ne;function qt(){throw new Error("setTimeout has not been defined")}function Bt(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?_e=setTimeout:_e=qt}catch{_e=qt}try{typeof clearTimeout=="function"?Ne=clearTimeout:Ne=Bt}catch{Ne=Bt}})();function $n(i){if(_e===setTimeout)return setTimeout(i,0);if((_e===qt||!_e)&&setTimeout)return _e=setTimeout,setTimeout(i,0);try{return _e(i,0)}catch{try{return _e.call(null,i,0)}catch{return _e.call(this,i,0)}}}function qa(i){if(Ne===clearTimeout)return clearTimeout(i);if((Ne===Bt||!Ne)&&clearTimeout)return Ne=clearTimeout,clearTimeout(i);try{return Ne(i)}catch{try{return Ne.call(null,i)}catch{return Ne.call(this,i)}}}var We=[],cr=!1,ir,Hr=-1;function Ba(){!cr||!ir||(cr=!1,ir.length?We=ir.concat(We):Hr=-1,We.length&&qn())}function qn(){if(!cr){var i=$n(Ba);cr=!0;for(var e=We.length;e;){for(ir=We,We=[];++Hr<e;)ir&&ir[Hr].run();Hr=-1,e=We.length}ir=null,cr=!1,qa(i)}}H.nextTick=function(i){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];We.push(new Bn(i,e)),We.length===1&&!cr&&$n(qn)};function Bn(i,e){this.fun=i,this.array=e}Bn.prototype.run=function(){this.fun.apply(null,this.array)},H.title="browser",H.browser=!0,H.env={},H.argv=[],H.version="",H.versions={};function He(){}H.on=He,H.addListener=He,H.once=He,H.off=He,H.removeListener=He,H.removeAllListeners=He,H.emit=He,H.prependListener=He,H.prependOnceListener=He,H.listeners=function(i){return[]},H.binding=function(i){throw new Error("process.binding is not supported")},H.cwd=function(){return"/"},H.chdir=function(i){throw new Error("process.chdir is not supported")},H.umask=function(){return 0},function(i){function e(){var a=this||self;return delete i.prototype.__magic__,a}if(typeof globalThis=="object")return globalThis;if(this)return e();i.defineProperty(i.prototype,"__magic__",{configurable:!0,get:e});var r=__magic__;return r}(Object);var ja=me,La=function(e,r){ja.forEach(e,function(o,u){u!==r&&u.toUpperCase()===r.toUpperCase()&&(e[r]=o,delete e[u])})},jn=function(e,r,a,o,u){return e.config=r,a&&(e.code=a),e.request=o,e.response=u,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},jt,Ln;function _n(){if(Ln)return jt;Ln=1;var i=jn;return jt=function(r,a,o,u,l){var s=new Error(r);return i(s,a,o,u,l)},jt}var Lt,Nn;function _a(){if(Nn)return Lt;Nn=1;var i=_n();return Lt=function(r,a,o){var u=o.config.validateStatus;!o.status||!u||u(o.status)?r(o):a(i("Request failed with status code "+o.status,o.config,null,o.request,o))},Lt}var _t,Dn;function Na(){if(Dn)return _t;Dn=1;var i=me;return _t=i.isStandardBrowserEnv()?function(){return{write:function(a,o,u,l,s,m){var p=[];p.push(a+"="+encodeURIComponent(o)),i.isNumber(u)&&p.push("expires="+new Date(u).toGMTString()),i.isString(l)&&p.push("path="+l),i.isString(s)&&p.push("domain="+s),m===!0&&p.push("secure"),document.cookie=p.join("; ")},read:function(a){var o=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove:function(a){this.write(a,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),_t}var Nt,Mn;function Da(){return Mn||(Mn=1,Nt=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}),Nt}var Dt,kn;function Ma(){return kn||(kn=1,Dt=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}),Dt}var Mt,zn;function ka(){if(zn)return Mt;zn=1;var i=Da(),e=Ma();return Mt=function(a,o){return a&&!i(o)?e(a,o):o},Mt}var kt,Zn;function za(){if(Zn)return kt;Zn=1;var i=me,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return kt=function(a){var o={},u,l,s;return a&&i.forEach(a.split(`
`),function(p){if(s=p.indexOf(":"),u=i.trim(p.substr(0,s)).toLowerCase(),l=i.trim(p.substr(s+1)),u){if(o[u]&&e.indexOf(u)>=0)return;u==="set-cookie"?o[u]=(o[u]?o[u]:[]).concat([l]):o[u]=o[u]?o[u]+", "+l:l}}),o},kt}var zt,Vn;function Za(){if(Vn)return zt;Vn=1;var i=me;return zt=i.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a"),o;function u(l){var s=l;return r&&(a.setAttribute("href",s),s=a.href),a.setAttribute("href",s),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:a.pathname.charAt(0)==="/"?a.pathname:"/"+a.pathname}}return o=u(window.location.href),function(s){var m=i.isString(s)?u(s):s;return m.protocol===o.protocol&&m.host===o.host}}():function(){return function(){return!0}}(),zt}var Zt,Wn;function Jr(){if(Wn)return Zt;Wn=1;function i(e){this.message=e}return i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,Zt=i,Zt}var Vt,Hn;function Jn(){if(Hn)return Vt;Hn=1;var i=me,e=_a(),r=Na(),a=Un,o=ka(),u=za(),l=Za(),s=_n(),m=Xr(),p=Jr();return Vt=function(g){return new Promise(function(O,_){var N=g.data,Ue=g.headers,ye=g.responseType,Te;function Xe(){g.cancelToken&&g.cancelToken.unsubscribe(Te),g.signal&&g.signal.removeEventListener("abort",Te)}i.isFormData(N)&&delete Ue["Content-Type"];var R=new XMLHttpRequest;if(g.auth){var M=g.auth.username||"",ge=g.auth.password?unescape(encodeURIComponent(g.auth.password)):"";Ue.Authorization="Basic "+btoa(M+":"+ge)}var we=o(g.baseURL,g.url);R.open(g.method.toUpperCase(),a(we,g.params,g.paramsSerializer),!0),R.timeout=g.timeout;function he(){if(R){var ne="getAllResponseHeaders"in R?u(R.getAllResponseHeaders()):null,xe=!ye||ye==="text"||ye==="json"?R.responseText:R.response,se={data:xe,status:R.status,statusText:R.statusText,headers:ne,config:g,request:R};e(function(Ee){O(Ee),Xe()},function(Ee){_(Ee),Xe()},se),R=null}}if("onloadend"in R?R.onloadend=he:R.onreadystatechange=function(){!R||R.readyState!==4||R.status===0&&!(R.responseURL&&R.responseURL.indexOf("file:")===0)||setTimeout(he)},R.onabort=function(){R&&(_(s("Request aborted",g,"ECONNABORTED",R)),R=null)},R.onerror=function(){_(s("Network Error",g,null,R)),R=null},R.ontimeout=function(){var xe=g.timeout?"timeout of "+g.timeout+"ms exceeded":"timeout exceeded",se=g.transitional||m.transitional;g.timeoutErrorMessage&&(xe=g.timeoutErrorMessage),_(s(xe,g,se.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",R)),R=null},i.isStandardBrowserEnv()){var Me=(g.withCredentials||l(we))&&g.xsrfCookieName?r.read(g.xsrfCookieName):void 0;Me&&(Ue[g.xsrfHeaderName]=Me)}"setRequestHeader"in R&&i.forEach(Ue,function(xe,se){typeof N>"u"&&se.toLowerCase()==="content-type"?delete Ue[se]:R.setRequestHeader(se,xe)}),i.isUndefined(g.withCredentials)||(R.withCredentials=!!g.withCredentials),ye&&ye!=="json"&&(R.responseType=g.responseType),typeof g.onDownloadProgress=="function"&&R.addEventListener("progress",g.onDownloadProgress),typeof g.onUploadProgress=="function"&&R.upload&&R.upload.addEventListener("progress",g.onUploadProgress),(g.cancelToken||g.signal)&&(Te=function(ne){R&&(_(!ne||ne&&ne.type?new p("canceled"):ne),R.abort(),R=null)},g.cancelToken&&g.cancelToken.subscribe(Te),g.signal&&(g.signal.aborted?Te():g.signal.addEventListener("abort",Te))),N||(N=null),R.send(N)})},Vt}var Wt,Xn;function Xr(){if(Xn)return Wt;Xn=1;var i=me,e=La,r=jn,a={"Content-Type":"application/x-www-form-urlencoded"};function o(m,p){!i.isUndefined(m)&&i.isUndefined(m["Content-Type"])&&(m["Content-Type"]=p)}function u(){var m;return(typeof XMLHttpRequest<"u"||typeof Wr<"u"&&Object.prototype.toString.call(Wr)==="[object process]")&&(m=Jn()),m}function l(m,p,y){if(i.isString(m))try{return(p||JSON.parse)(m),i.trim(m)}catch(g){if(g.name!=="SyntaxError")throw g}return(y||JSON.stringify)(m)}var s={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:u(),transformRequest:[function(p,y){return e(y,"Accept"),e(y,"Content-Type"),i.isFormData(p)||i.isArrayBuffer(p)||i.isBuffer(p)||i.isStream(p)||i.isFile(p)||i.isBlob(p)?p:i.isArrayBufferView(p)?p.buffer:i.isURLSearchParams(p)?(o(y,"application/x-www-form-urlencoded;charset=utf-8"),p.toString()):i.isObject(p)||y&&y["Content-Type"]==="application/json"?(o(y,"application/json"),l(p)):p}],transformResponse:[function(p){var y=this.transitional||s.transitional,g=y&&y.silentJSONParsing,A=y&&y.forcedJSONParsing,O=!g&&this.responseType==="json";if(O||A&&i.isString(p)&&p.length)try{return JSON.parse(p)}catch(_){if(O)throw _.name==="SyntaxError"?r(_,this,"E_JSON_PARSE"):_}return p}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(p){return p>=200&&p<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return i.forEach(["delete","get","head"],function(p){s.headers[p]={}}),i.forEach(["post","put","patch"],function(p){s.headers[p]=i.merge(a)}),Wt=s,Wt}var Va=me,Wa=Xr(),Ha=function(e,r,a){var o=this||Wa;return Va.forEach(a,function(l){e=l.call(o,e,r)}),e},Ht,Gn;function Kn(){return Gn||(Gn=1,Ht=function(e){return!!(e&&e.__CANCEL__)}),Ht}var Yn=me,Jt=Ha,Ja=Kn(),Xa=Xr(),Ga=Jr();function Xt(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new Ga("canceled")}var Ka=function(e){Xt(e),e.headers=e.headers||{},e.data=Jt.call(e,e.data,e.headers,e.transformRequest),e.headers=Yn.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Yn.forEach(["delete","get","head","post","put","patch","common"],function(o){delete e.headers[o]});var r=e.adapter||Xa.adapter;return r(e).then(function(o){return Xt(e),o.data=Jt.call(e,o.data,o.headers,e.transformResponse),o},function(o){return Ja(o)||(Xt(e),o&&o.response&&(o.response.data=Jt.call(e,o.response.data,o.response.headers,e.transformResponse))),Promise.reject(o)})},ve=me,Qn=function(e,r){r=r||{};var a={};function o(y,g){return ve.isPlainObject(y)&&ve.isPlainObject(g)?ve.merge(y,g):ve.isPlainObject(g)?ve.merge({},g):ve.isArray(g)?g.slice():g}function u(y){if(ve.isUndefined(r[y])){if(!ve.isUndefined(e[y]))return o(void 0,e[y])}else return o(e[y],r[y])}function l(y){if(!ve.isUndefined(r[y]))return o(void 0,r[y])}function s(y){if(ve.isUndefined(r[y])){if(!ve.isUndefined(e[y]))return o(void 0,e[y])}else return o(void 0,r[y])}function m(y){if(y in r)return o(e[y],r[y]);if(y in e)return o(void 0,e[y])}var p={url:l,method:l,data:l,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:m};return ve.forEach(Object.keys(e).concat(Object.keys(r)),function(g){var A=p[g]||u,O=A(g);ve.isUndefined(O)&&A!==m||(a[g]=O)}),a},Gt,ei;function ri(){return ei||(ei=1,Gt={version:"0.23.0"}),Gt}var Ya=ri().version,Kt={};["object","boolean","number","function","string","symbol"].forEach(function(i,e){Kt[i]=function(a){return typeof a===i||"a"+(e<1?"n ":" ")+i}});var ti={};Kt.transitional=function(e,r,a){function o(u,l){return"[Axios v"+Ya+"] Transitional option '"+u+"'"+l+(a?". "+a:"")}return function(u,l,s){if(e===!1)throw new Error(o(l," has been removed"+(r?" in "+r:"")));return r&&!ti[l]&&(ti[l]=!0,console.warn(o(l," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(u,l,s):!0}};function Qa(i,e,r){if(typeof i!="object")throw new TypeError("options must be an object");for(var a=Object.keys(i),o=a.length;o-- >0;){var u=a[o],l=e[u];if(l){var s=i[u],m=s===void 0||l(s,u,i);if(m!==!0)throw new TypeError("option "+u+" must be "+m);continue}if(r!==!0)throw Error("Unknown option "+u)}}var eo={assertOptions:Qa,validators:Kt},ni=me,ro=Un,ii=ba,ai=Ka,Gr=Qn,oi=eo,dr=oi.validators;function Ar(i){this.defaults=i,this.interceptors={request:new ii,response:new ii}}Ar.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=Gr(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=e.transitional;r!==void 0&&oi.assertOptions(r,{silentJSONParsing:dr.transitional(dr.boolean),forcedJSONParsing:dr.transitional(dr.boolean),clarifyTimeoutError:dr.transitional(dr.boolean)},!1);var a=[],o=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(e)===!1||(o=o&&A.synchronous,a.unshift(A.fulfilled,A.rejected))});var u=[];this.interceptors.response.forEach(function(A){u.push(A.fulfilled,A.rejected)});var l;if(!o){var s=[ai,void 0];for(Array.prototype.unshift.apply(s,a),s=s.concat(u),l=Promise.resolve(e);s.length;)l=l.then(s.shift(),s.shift());return l}for(var m=e;a.length;){var p=a.shift(),y=a.shift();try{m=p(m)}catch(g){y(g);break}}try{l=ai(m)}catch(g){return Promise.reject(g)}for(;u.length;)l=l.then(u.shift(),u.shift());return l},Ar.prototype.getUri=function(e){return e=Gr(this.defaults,e),ro(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},ni.forEach(["delete","get","head","options"],function(e){Ar.prototype[e]=function(r,a){return this.request(Gr(a||{},{method:e,url:r,data:(a||{}).data}))}}),ni.forEach(["post","put","patch"],function(e){Ar.prototype[e]=function(r,a,o){return this.request(Gr(o||{},{method:e,url:r,data:a}))}});var to=Ar,Yt,si;function no(){if(si)return Yt;si=1;var i=Jr();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var a;this.promise=new Promise(function(l){a=l});var o=this;this.promise.then(function(u){if(o._listeners){var l,s=o._listeners.length;for(l=0;l<s;l++)o._listeners[l](u);o._listeners=null}}),this.promise.then=function(u){var l,s=new Promise(function(m){o.subscribe(m),l=m}).then(u);return s.cancel=function(){o.unsubscribe(l)},s},r(function(l){o.reason||(o.reason=new i(l),a(o.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]},e.prototype.unsubscribe=function(a){if(this._listeners){var o=this._listeners.indexOf(a);o!==-1&&this._listeners.splice(o,1)}},e.source=function(){var a,o=new e(function(l){a=l});return{token:o,cancel:a}},Yt=e,Yt}var Qt,ui;function io(){return ui||(ui=1,Qt=function(e){return function(a){return e.apply(null,a)}}),Qt}var en,fi;function ao(){return fi||(fi=1,en=function(e){return typeof e=="object"&&e.isAxiosError===!0}),en}var li=me,oo=Cn,Kr=to,so=Qn,uo=Xr();function hi(i){var e=new Kr(i),r=oo(Kr.prototype.request,e);return li.extend(r,Kr.prototype,e),li.extend(r,e),r.create=function(o){return hi(so(i,o))},r}var De=hi(uo);De.Axios=Kr,De.Cancel=Jr(),De.CancelToken=no(),De.isCancel=Kn(),De.VERSION=ri().version,De.all=function(e){return Promise.all(e)},De.spread=io(),De.isAxiosError=ao(),aa.exports=De,kr.default=De,function(i){i.exports=kr}(ia);const fo=Lr(Ct),pr=class{constructor({config:e={},errorHandler:r=()=>{}}){L(this,Qr,e=>{e.interceptors.request.use(fe(pr,et)),e.interceptors.request.use(fe(pr,rt)),e.interceptors.response.use(r=>{var a;return fe(a=pr,Sr).call(a,r,"success")},r=>{var a;return fe(a=pr,Sr).call(a,r,"error")}),e.interceptors.request.use(r=>r,fe(this,br)),e.interceptors.response.use(r=>r,fe(this,br))});L(this,br,e=>{const r=e||{},a=r.response||{},o={...r,...a.data,status:a.status};return this.errorHandler(o),Promise.reject(o)});this.config=e,this.axiosClient=null,this.errorHandler=r}create(){return this.axiosClient=fo.create(this.config),fe(this,Qr).call(this,this.axiosClient),this.axiosClient}};let ar=pr;Qr=new WeakMap,br=new WeakMap,et=new WeakMap,Sr=new WeakMap,rt=new WeakMap,L(ar,et,e=>({...e,metadata:{startTime:new Date}})),L(ar,Sr,(e,r="success")=>(e.config.metadata.endTime=new Date,e.duration=e.config.metadata.endTime-e.config.metadata.startTime,r==="success"?e:Promise.reject(e))),L(ar,rt,e=>e);class Yr{constructor({identityServerHostName:e,clientId:r,clientSecret:a,token:o,tokenType:u,authEndpoint:l="connect/token"}={}){L(this,Fr,void 0);L(this,or,void 0);const s={baseURL:e,json:!0};this._validateTokenProvider(e),this.authEndpoint=l,this.token=o,this.tokenType=u,Ve(this,Fr,new ar({config:s}).create()),this.clientId=r,Ve(this,or,a)}get isAuthorized(){const{tokenType:e,token:r}=this;return e&&r}get _data(){return`grant_type=client_credentials&client_id=${this.clientId}&client_secret=${fe(this,or)}`}async getToken(e){if(this.isAuthorized){const{tokenType:r,token:a}=this;return{tokenType:r,token:a}}else return this.generateToken(e)}async generateToken(e){e&&this._setSecrets(e);try{this._validateGenerateToken(this);const r=await fe(this,Fr).post(this.authEndpoint,this._data),a=this._parseTokenInfo(r==null?void 0:r.data);return this._setTokenInfo(a),a}catch(r){return Promise.reject(r)}}_parseTokenInfo(e){const{access_token:r,token:a,expires_in:o,expiresIn:u,token_type:l,tokenType:s,scope:m}=e||{};return{token:a||r,expiresIn:u||o,tokenType:s||l,scope:m}}_setTokenInfo(e){const{token:r,tokenType:a}=e;this.token=r,this.tokenType=a}clearTokenInfo(){this.token=void 0,this.tokenType=void 0}_setSecrets({clientSecret:e,clientId:r}={}){r&&(this.clientId=r),e&&Ve(this,or,e)}_validateTokenProvider(e){new Ie([{rule:!!e,message:'"identityServerHostName" is required field, must be defined'}]).validateWithThrowError()}_validateGenerateToken(e){new Ie([{rule:!!e.clientId,message:'"clientId" is required field, must be defined'},{rule:!!fe(e,or),message:'"clientSecret" is required field, must be defined'}]).validateWithThrowError()}}Fr=new WeakMap,or=new WeakMap;const Ye=class{constructor({config:e={baseURL:"",json:!0},returnOriginalResponse:r=!1,errorHandler:a=()=>{},tokenProvider:o,authorizationParams:u}={}){L(this,tt);L(this,Tr,void 0);L(this,mr,void 0);L(this,Cr,!1);L(this,sr,!1);var l;K(l=Ye,nt,di).call(l,{config:e,tokenProvider:o,authorizationParams:u}),Ve(this,Cr,r),Ve(this,mr,o instanceof Yr?o:new Yr(u)),Ve(this,Tr,new ar({config:e,errorHandler:a}).create())}async transformPostRequest(e,r){var o;const a=K(o=Ye,st,yi).call(o,r);return fe(this,Tr).post("transform",e,{headers:a})}async transform(e,r={}){var u,l;const{secrets:a=null,returnOriginal:o=!1}=r||{};try{K(u=Ye,ot,vi).call(u,e);const s=await fe(this,mr).getToken(a),m=await this.transformPostRequest(e,s);return Ve(this,sr,!1),fe(this,Cr)||o?m:K(l=Ye,ut,gi).call(l,m,e)}catch(s){return K(this,tt,ci).call(this,s,e,r)}}};let Je=Ye;Tr=new WeakMap,mr=new WeakMap,Cr=new WeakMap,sr=new WeakMap,tt=new WeakSet,ci=function(e,r,a){return e.status===401&&!fe(this,sr)?(Ve(this,sr,!0),fe(this,mr).clearTokenInfo(),this.transform(r,a)):(Ve(this,sr,!1),Promise.reject(e))},nt=new WeakSet,di=function({tokenProvider:e,config:r,authorizationParams:a}){new Ie([{rule:!!(r!=null&&r.baseURL),message:'"config.baseURL" is required field, must be defined'},{rule:e instanceof Yr||!!(a!=null&&a.identityServerHostName),message:`For external TokenProvider "tokenProvider" must be defined as instance of TokenProvider;
        For build-in TokenProvider "authorizationParams.identityServerHostName" is required field.`}]).validateWithThrowError()},it=new WeakSet,pi=function(e){const{requests:r=[],processingContexts:a=[],rightsContexts:o=[]}=e||{},u=(m,p)=>m.find(y=>y.guid===p),l=Array.isArray(r)&&r.every(({processingContext:m,rightsContext:p})=>(typeof m>"u"||u(a,m))&&u(o,p));new Ie([{rule:l,message:'"requestData" contains requests with invalid processing/rights context references'}]).validateWithThrowError()},at=new WeakSet,mi=function(e){const r=te.validate(e,{$ref:"/RequestData"});new Ie([{rule:r.valid,message:'Invalid "requestData" format/structure'}]).validateWithThrowError()},ot=new WeakSet,vi=function(e){var r,a;K(r=Ye,at,mi).call(r,e),K(a=Ye,it,pi).call(a,e)},st=new WeakSet,yi=function({tokenType:e,token:r}){return{"Content-Type":"application/json",Authorization:`${e} ${r}`}},ut=new WeakSet,gi=function(e,r){const{responses:a=[]}=(e==null?void 0:e.data)||{},o=a.map(u=>{const l=r.requests.find(({guid:s})=>s===u.request);return{...u,instances:u.instances.map(({className:s,propertyName:m,value:p,error:y},g)=>{const A={className:s,propertyName:m,transformed:p,original:l.instances[g].value};return y?{...A,error:y}:A})}});return{...e,data:{responses:o}}},L(Je,nt),L(Je,it),L(Je,at),L(Je,ot),L(Je,st),L(Je,ut);const Fe=class{constructor(){L(this,Rr);this.rightsContextsDictionary={},this.processingContextsDictionary={},this.requests=[]}get rightsContexts(){var e;return K(e=Fe,Ir,un).call(e,this.rightsContextsDictionary)}get processingContexts(){var e;return K(e=Fe,Ir,un).call(e,this.processingContextsDictionary)}addRequest({instances:e,rightsContext:r,processingContext:a}){var m,p;K(m=Fe,ht,Ei).call(m,{instances:e,rightsContext:r,processingContext:a});const o=K(this,Rr,sn).call(this,"rights",r),u=a?K(this,Rr,sn).call(this,"processing",a):void 0,l=K(p=Fe,ct,Ai).call(p,e),s=this.requests.find(y=>y.rightsContext===o&&y.processingContext===u);return s?s.instances=[...s.instances,...l]:this.requests.push({guid:V.v4(),rightsContext:o,processingContext:u,instances:l}),this}build(){var o;K(o=Fe,pt,Si).call(o,this);const{rightsContexts:e,processingContexts:r,requests:a}=this;return{rightsContexts:e,processingContexts:r,requests:a}}};let Oe=Fe;Rr=new WeakSet,sn=function(e,r){var s;const a=K(s=Fe,lt,xi).call(s,e,r==null?void 0:r.evidences),o=this[`${e}ContextsDictionary`],u=Object.entries(o).find(([m,p])=>St(a,p)),l=u?u[0]:V.v4();return u||(o[l]=a),l},ft=new WeakSet,wi=function(e){return Ft(e)},Ir=new WeakSet,un=function(e){return Object.entries(e).reduce((r,[a,o])=>{var u;return[...r,{guid:a,evidences:K(u=Fe,ft,wi).call(u,o)}]},[])},lt=new WeakSet,xi=function(e,r){if(Array.isArray(r)&&r.length>0)return Tn(r,"name","value");if(tr(r)&&Object.keys(r).length>0)return r;throw new Error(`Empty evidences or invalid evidences structure in "${e}Context"`)},Or=new WeakSet,fn=function({dependencyContext:e,evidences:r,dependencies:a}){var u;const o=e||r||a;return o?Array.isArray(o)&&o.length>0?{evidences:o}:tr(o)&&Object.keys(o).length>0?o.evidences&&(Array.isArray(o.evidences)||tr(o.evidences))?K(u=Fe,Or,fn).call(u,o):{evidences:Ft(o)}:null:null},ht=new WeakSet,Ei=function(e){const r=te.validate(e,{$ref:"/RequestInputData"});new Ie([{rule:r.valid,message:"Invalid format/structure of input params"}]).validateWithThrowError()},ct=new WeakSet,Ai=function(e){var r;return K(r=Fe,dt,bi).call(r,e),e.filter(({value:a})=>typeof a<"u").map(a=>{var y;const{className:o,propertyName:u,value:l}=a,s=K(y=Fe,Or,fn).call(y,a),m={className:o,propertyName:u,value:l},p={...m,dependencyContext:s};return s?p:m})},dt=new WeakSet,bi=function(e){new Ie([{rule:e.some(a=>Mr.validateValue(a)),message:'Must be at least one valid instance object in "instances"'}]).validateWithThrowError()},pt=new WeakSet,Si=function({rightsContexts:e,requests:r}){new Ie([{rule:r.length>0,message:'Use "addRequest" method for generating request'},{rule:e.length>0,message:'"rightsContexts" is empty'}]).validateWithThrowError()},L(Oe,ft),L(Oe,Ir),L(Oe,lt),L(Oe,Or),L(Oe,ht),L(Oe,ct),L(Oe,dt),L(Oe,pt),B.EngineClient=Je,B.RPSContext=Tt,B.RPSEvidence=bt,B.RPSValue=Mr,B.RequestBuilder=Oe,B.TokenProvider=Yr,B.utils=na,Object.defineProperty(B,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=index.cjs.map
